<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[$ls /home/felipehw]]></title>
  <subtitle><![CDATA[software & cultura livre]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="https://felipehw.github.io/"/>
  <updated>2015-05-10T14:27:53.000Z</updated>
  <id>https://felipehw.github.io/</id>
  
  <author>
    <name><![CDATA[felipehw]]></name>
    <email><![CDATA[felipehw@gmail.com]]></email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Tamanho de fontes em monitores 15' FullHD no Gnome, Firefox e Thunderbird]]></title>
    <link href="https://felipehw.github.io/2015/05/10/tamanho-de-fontes-em-monitores-15-fullhd-no-gnome-firefox-e-thunderbird/"/>
    <id>https://felipehw.github.io/2015/05/10/tamanho-de-fontes-em-monitores-15-fullhd-no-gnome-firefox-e-thunderbird/</id>
    <published>2015-05-10T17:27:32.000Z</published>
    <updated>2015-05-10T14:27:53.000Z</updated>
    <content type="html"><![CDATA[<p>Recentemente, recebi um notebook de <strong>15 polegadas FullHD (1920x1080)</strong> para trabalhar. E qual não foi a minha surpresa em descobrir que o Gnome, Firefox e Thunderbird (entre outros) ficavam com a <strong>fonte muito pequena</strong> para uma legibilidade adequada.</p>
<img src="/2015/05/10/tamanho-de-fontes-em-monitores-15-fullhd-no-gnome-firefox-e-thunderbird/mr_magoo-min.png">
<a id="more"></a>
<p>Uma pesquisa rápida na internet me mostrou como adequar a fonte e tornar a experiência extremamente agradável. Vejamos as dicas:</p>
<ul>
<li>Gnome<br>Vá em “Ferramenta de ajustes” (“Tweak Tool”) -&gt; “Fontes”: Modifique o “Fator de escala” de <code>1.00</code> p/ <code>1.15</code>.</li>
<li>Firefox/Iceweasel<br>Modifique <code>layout.css.devPixelsPerPx</code> em <code>about:config</code> de <code>-1.0</code> p/ <code>1.25</code>.</li>
<li>Thunderbird/Icedove<br>Mesmo processo do Firefox, porém acessei <code>about:config</code> em “Edit” → “Preferences” → “Advanced” → “Config editor”. Optei pelo valor <code>1.1</code>.</li>
</ul>
<p>Obs1: Recomendo d+ que telas 15 polegadas sejam FullHD, é outra experiência.<br>Obs2: Ajustes realizados no Debian Jessie (Gnome 3.14, Iceweasel 31, Icedove 31)<br>Obs3: Ajuste os valores numéricos para o que lhe agradar mais.</p>
<h2 id="Links">Links</h2><ul>
<li><a href="https://wiki.archlinux.org/index.php/HiDPI" target="_blank" rel="external">HiDPI - ArchWiki</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>Recentemente, recebi um notebook de <strong>15 polegadas FullHD (1920x1080)</strong> para trabalhar. E qual não foi a minha surpresa em descobrir que o Gnome, Firefox e Thunderbird (entre outros) ficavam com a <strong>fonte muito pequena</strong> para uma legibilidade adequada.</p>
<img src="/2015/05/10/tamanho-de-fontes-em-monitores-15-fullhd-no-gnome-firefox-e-thunderbird/mr_magoo-min.png">]]>
    
    </summary>
    
      <category term="firefox" scheme="https://felipehw.github.io/tags/firefox/"/>
    
      <category term="fullhd" scheme="https://felipehw.github.io/tags/fullhd/"/>
    
      <category term="gnome" scheme="https://felipehw.github.io/tags/gnome/"/>
    
      <category term="thunderbird" scheme="https://felipehw.github.io/tags/thunderbird/"/>
    
      <category term="gnu/linux" scheme="https://felipehw.github.io/categories/gnu-linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Como automagicamente utilizar o melhor mirror Debian disponível]]></title>
    <link href="https://felipehw.github.io/2015/05/02/servico-p-automagicamente-utilizar-o-melhor-mirror-debian-disponivel/"/>
    <id>https://felipehw.github.io/2015/05/02/servico-p-automagicamente-utilizar-o-melhor-mirror-debian-disponivel/</id>
    <published>2015-05-02T20:09:41.000Z</published>
    <updated>2015-05-02T17:10:15.000Z</updated>
    <content type="html"><![CDATA[<p>Antes de mais nada: Parabéns (atrasado - foi em 25/04) ao Projeto Debian pelo lançamento do <em>release</em> Jessie!</p>
<img src="/2015/05/02/servico-p-automagicamente-utilizar-o-melhor-mirror-debian-disponivel/lancamento-jessie-minions.gif">
<p>Como parte das comemorações do lançamento do Debian Jessie, segue uma dica valiosa.</p>
<p>O projeto Debian disponibiliza um serviço que <strong>automagicamente</strong> escolhe o melhor mirror disponível cada vez que você necessitar acessar os repositórios da distribuição, seja para atualizar ou baixar algum software novo.</p>
<a id="more"></a>
<p>O nome do serviço é <a href="http://httpredir.debian.org/" target="_blank" rel="external">httpredir.debian.org</a> e entre os critérios que  ele utiliza para escolher o melhor mirror temos a localização geográfica e de rede, a disponibilidade e atualização dos mirrors, etc.</p>
<p>Para testarmos qual mirror o serviço escolheria para nossa máquina/localização, veja <a href="http://httpredir.debian.org/demo.html" target="_blank" rel="external">aqui</a>.</p>
<p>Para utilizar, basta substituir o seu mirror antigo em <code>/etc/apt/sources.list</code> (exemplo para o recém-lançado Debian Jessie):</p>
<ul>
<li><p>Antes:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb <span class="string">http:</span><span class="comment">//debian.pop-sc.rnp.br/debian/ jessie main</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Depois:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb <span class="string">http:</span><span class="comment">//httpredir.debian.org/debian/ jessie main</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Exemplo">Exemplo</h2><p>Segue de exemplo o meu <code>/etc/apt/sources.list</code> com os repositórios para a nova versão estável do Debian (Jessie) habilitados (inclusive o <a href="http://backports.debian.org/" target="_blank" rel="external">backports</a>) e os repositórios para <em>testing</em>, <em>unstable</em> e <em>experimental</em> comentados (desabilitados).</p>
<p><code>/etc/apt/sources.list</code><br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#STABLE</span></span><br><span class="line"></span><br><span class="line">deb http:<span class="comment">//httpredir.debian.org/debian/ jessie main  </span></span><br><span class="line">deb-src http:<span class="comment">//httpredir.debian.org/debian/ jessie main  </span></span><br><span class="line"></span><br><span class="line">deb http:<span class="comment">//security.debian.org/ jessie/updates main</span></span><br><span class="line">deb-src http:<span class="comment">//security.debian.org/ jessie/updates main</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># jessie-updates, previously known as 'volatile'</span></span><br><span class="line">deb http:<span class="comment">//httpredir.debian.org/debian/ jessie-updates main</span></span><br><span class="line">deb-src http:<span class="comment">//httpredir.debian.org/debian/ jessie-updates main</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># jessie-backports, previously on backports.debian.org</span></span><br><span class="line">deb http:<span class="comment">//httpredir.debian.org/debian/ jessie-backports main  </span></span><br><span class="line">deb-src http:<span class="comment">//httpredir.debian.org/debian/ jessie-backports main  </span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#ADICIONADO (TESTING/UNSTABLE/EXPERIMENTAL)</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#TESTING</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#deb http://httpredir.debian.org/debian/ testing main  </span></span><br><span class="line"><span class="preprocessor">#deb-src http://httpredir.debian.org/debian/ testing main  </span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#deb http://security.debian.org/ testing/updates main</span></span><br><span class="line"><span class="preprocessor">#deb-src http://security.debian.org/ testing/updates main</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># testing-updates, previously known as 'volatile'</span></span><br><span class="line"><span class="preprocessor">#deb http://httpredir.debian.org/debian/ testing-updates main</span></span><br><span class="line"><span class="preprocessor">#deb-src http://httpredir.debian.org/debian/ testing-updates main</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#SID</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#deb http://httpredir.debian.org/debian/ unstable main</span></span><br><span class="line"><span class="preprocessor">#deb-src http://httpredir.debian.org/debian/ unstable main</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#EXPERIMENTAL</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#deb http://httpredir.debian.org/debian/ experimental main</span></span><br><span class="line"><span class="preprocessor">#deb-src http://httpredir.debian.org/debian/ experimental main</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Links">Links</h2><ul>
<li><a href="http://httpredir.debian.org/" target="_blank" rel="external">Debian mirrors HTTP redirector</a>: Site oficial do httpredir.debian.org. Contém mais informações sobre o serviço.<ul>
<li><a href="http://httpredir.debian.org/demo.html" target="_blank" rel="external">Demonstração</a>: Demonstração oficial do funcionamento e de qual mirror seria escolhido pelo serviço num dado momento.</li>
</ul>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>Antes de mais nada: Parabéns (atrasado - foi em 25/04) ao Projeto Debian pelo lançamento do <em>release</em> Jessie!</p>
<img src="/2015/05/02/servico-p-automagicamente-utilizar-o-melhor-mirror-debian-disponivel/lancamento-jessie-minions.gif">
<p>Como parte das comemorações do lançamento do Debian Jessie, segue uma dica valiosa.</p>
<p>O projeto Debian disponibiliza um serviço que <strong>automagicamente</strong> escolhe o melhor mirror disponível cada vez que você necessitar acessar os repositórios da distribuição, seja para atualizar ou baixar algum software novo.</p>]]>
    
    </summary>
    
      <category term="debian" scheme="https://felipehw.github.io/tags/debian/"/>
    
      <category term="gnu/linux" scheme="https://felipehw.github.io/categories/gnu-linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Redimensionando filesystems e volumes lógicos em LVM]]></title>
    <link href="https://felipehw.github.io/2015/04/25/redimensionando-volumes-logicos-em-particoes-lvm-criptografadas/"/>
    <id>https://felipehw.github.io/2015/04/25/redimensionando-volumes-logicos-em-particoes-lvm-criptografadas/</id>
    <published>2015-04-25T19:14:56.000Z</published>
    <updated>2015-04-25T16:15:15.000Z</updated>
    <content type="html"><![CDATA[<p>Veremos nesse post como redimensionar filesystems e volumes lógicos em LVM. Mas para que diabos precisamos disso?</p>
<p>Imagine que o particionador automático da instalação do Debian criou um sistema LVM com uma partição root grande demais e a partição de swap pequena demais e que precisamos mudar o tamanho de ambas … aumentando uma e diminuindo outra … Isso não é tão trivial como parece … e é isso que veremos. :D</p>
<img src="/2015/04/25/redimensionando-volumes-logicos-em-particoes-lvm-criptografadas/matroska-min.jpg">
<p><em>Cedo ou tarde, todo nerd precisa diminuir e aumentar filesystems em sistemas LVM …</em></p>
<a id="more"></a>
<p><strong>Preste atenção</strong>, para redimensionar tenha em mente que <strong>o filesystem está dentro do volume lógico</strong>.<br><strong>Para aumentar o tamanho de um filesystem</strong>, devemos <strong>primeiro</strong> aumentar o volume lógico em que ele está inserido <strong>e somente depois</strong> aumentar o filesystem.<br><strong>Para diminuir o tamanho de um filesystem</strong>, <strong>o caminho é o contrário</strong>, primeiro diminuímos o tamanho do filesystem e somente depois encolhemos o volume lógico.</p>
<p>Usaremos nesse post o cenário hipotético mencionado acima (diminuir partição root, aumentar partição swap). Vejamos:</p>
<ol>
<li><p>Encontre os volumes lógicos a serem trabalhados:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lvm</span></span><br><span class="line">lvm&gt; lvscan</span><br><span class="line">  ACTIVE            <span class="string">'/dev/dread-note-vg/root'</span> [<span class="number">106.98</span> GiB] inherit</span><br><span class="line">  ACTIVE            <span class="string">'/dev/dread-note-vg/swap_1'</span> [<span class="number">4.56</span> GiB] inherit</span><br></pre></td></tr></table></figure>
</li>
<li><p>Diminua o tamanho do filesystem que está grande demais.</p>
<ul>
<li><p>Cheque e corrija erros no filesystem (ex. p/ ext4):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># e2fsck -f /dev/dread-note-vg/root</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Diminua o tamanho do filesystem (ex: p/ 90GB):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># resize2fs /dev/dread-note-vg/root 90G</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Obs: <strong>O novo tamanho informado p/ o filesystem deve ser um pouco menor que o novo tamanho a ser informado para o volume lógico.</strong> Isso para evitar que em arrendondamentos feitos pela máquina, o filesystem fique maior que o volume lógico em que está inserido e ocorra *****.</p>
</li>
<li><p>Diminua o volume lógico da partição que está grande demais (ex: p/ 92GB).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lvresize -L 92G dread-note-vg/root</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Recupere o tamanho do filesystem - que estava grande demais - para ocupar todo o espaço do volume lógico redimensionado (dado que diminuímos o filesystem mais que o volume lógico - por segurança - e há espaço sobrando):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># resize2fs /dev/dread-note-vg/root</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Aumente o tamanho do volume lógico que está pequeno demais.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lvextend -l +100%FREE dread-note-vg/swap_1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Aumente o tamanho do filesystem que está pequeno demais.<br>Obs: Como é um filesystem swap, apenas recriei ele com o mesmo UUID ocupando todo o espaço disponível no volume lógico.</p>
<ul>
<li>Anotar o UUID da swap original: <code># blkid</code></li>
<li>Criar nova swap com o mesmo UUID:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkswap -U 475dbca3-d779-445d-912e-6dfeea5d9e4e /dev/mapper/dread--note--vg-swap_1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Resultado final:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lvm</span></span><br><span class="line">lvm&gt; lvscan</span><br><span class="line">  ACTIVE            <span class="string">'/dev/dread-note-vg/root'</span> [<span class="number">92.00</span> GiB] inherit</span><br><span class="line">  ACTIVE            <span class="string">'/dev/dread-note-vg/swap_1'</span> [<span class="number">19.55</span> GiB] inherit</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p>Veremos nesse post como redimensionar filesystems e volumes lógicos em LVM. Mas para que diabos precisamos disso?</p>
<p>Imagine que o particionador automático da instalação do Debian criou um sistema LVM com uma partição root grande demais e a partição de swap pequena demais e que precisamos mudar o tamanho de ambas … aumentando uma e diminuindo outra … Isso não é tão trivial como parece … e é isso que veremos. :D</p>
<img src="/2015/04/25/redimensionando-volumes-logicos-em-particoes-lvm-criptografadas/matroska-min.jpg">
<p><em>Cedo ou tarde, todo nerd precisa diminuir e aumentar filesystems em sistemas LVM …</em></p>]]>
    
    </summary>
    
      <category term="lvm" scheme="https://felipehw.github.io/tags/lvm/"/>
    
      <category term="particionamento" scheme="https://felipehw.github.io/tags/particionamento/"/>
    
      <category term="gnu/linux" scheme="https://felipehw.github.io/categories/gnu-linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Criando partições encriptadas (LVM sobre LUKS)]]></title>
    <link href="https://felipehw.github.io/2015/04/19/criando-particoes-encriptadas-lvm-sobre-luks/"/>
    <id>https://felipehw.github.io/2015/04/19/criando-particoes-encriptadas-lvm-sobre-luks/</id>
    <published>2015-04-19T03:05:40.000Z</published>
    <updated>2015-04-19T00:06:14.000Z</updated>
    <content type="html"><![CDATA[<p>Nesse post veremos como adicionar novos HDs à sistemas GNU/Linux com os dados criptografados utilizando um mix de <a href="https://en.wikipedia.org/wiki/Logical_Volume_Manager_%28Linux%29" target="_blank" rel="external">LVM</a> e <a href="https://en.wikipedia.org/wiki/Linux_Unified_Key_Setup" target="_blank" rel="external">LUKS</a>.<br>Dessa forma, se o FBI obter aquele seu HD com todas as séries de Hollywood … não poderá acessar o conteúdo dele :D. E nem bisbilhoteiros em caso de perca ou roubo de seus HDs.</p>
<img src="/2015/04/19/criando-particoes-encriptadas-lvm-sobre-luks/criptografia-min.jpg">
<a id="more"></a>
<p>Não é um post teórico, mas sim de <strong>receita de bolo</strong>. <strong>A teoria, entretanto, é essencial</strong> para saber o que está acontencendo e conhecer melhor as possibilidades e limitações do setup escolhido. Essa teoria, porém, não cabe no escopo de um post e nem tenho competência (e paciência) para abordá-la. Por isso, coloquei os melhores links que encontrei sobre a mesma no final do post. <strong>Recomendo fortemente a leitura dos <a href="#links">links</a></strong> (não é da boca para fora, li e aprendi bastante - e o conteúdo não é excessivamente técnico).</p>
<p>As únicas pinceladas teóricas seguem abaixo:</p>
<ul>
<li><p>O LVM (se você não sabe o que é, pare e se informe <a href="https://wiki.archlinux.org/index.php/LVM" target="_blank" rel="external">antes</a>) não é essencial para criptografar um disco, mas utilizamos o mesmo para termos flexibilidade na criação/destruição/modificação de partições no interior do disco criptografado.</p>
</li>
<li><p>O LVM em nosso setup é utilizado numa camada acima do LUKS (tecnologia para criptografia), assim necessitamos de apenas uma password para destravar todas as partições no HD … e eliminamos possíveis <a href="https://wiki.archlinux.org/index.php/Dm-crypt/Swap_encryption#With_suspend-to-disk_support" target="_blank" rel="external">complicações</a> para suspender e etc. O lado negativo é que o layout do LVM não é transparente (está dentro do <em>blockdevice</em> encriptado usando LUKS) e por isso não é possível extender volumes lógicos através de outros discos.</p>
</li>
</ul>
<p><strong>=&gt;AVISO&lt;=</strong>: Não é um post para iniciantes. Assim, por exemplo, não será explicado quando usar <em>root</em>, como utilizar o gparted ou mesmo o que é <code>/etc/fstab</code>.</p>
<h2 id="Preparando_o_disco_e_criando_o_container_encriptado">Preparando o disco e criando o container encriptado</h2><p>Nesse passo preparemos o disco (apagaremos de forma a dificultar a quebra da criptografia) e criaremos o container criptografado. É aqui que reside a parte que realmente diz respeito à criptografia.</p>
<p><strong>Obs</strong>: No post supomos que o HD utilizado é <code>/dev/sdb</code>.</p>
<h3 id="1-_Escreva_o_disco_inteiro_com_dados_aleatórios">1. Escreva o disco inteiro com dados aleatórios</h3><p>Motivo: dificultar o deciframento ao garantir que o espaço vazio é indistinguível dos dados escritos sob criptografia.</p>
<ol>
<li><p>Crie um container encriptado temporário para o disco desejado (ex: <code>/dev/sdb</code>):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cryptsetup open --type plain /dev/sdb container</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Verifique que ele existe (ou seja, se <code>/dev/mapper/container</code> é listado):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fdisk -l</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Limpe o disco com dados pseudoaleatórios (aleatórios pq são escritos no container encriptado) [<em>demora muito</em>]:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dd if=/dev/zero of=/dev/mapper/container</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Feche o container:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cryptsetup close container</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>Fonte: <a href="https://wiki.archlinux.org/index.php/Dm-crypt/Drive_preparation#dm-crypt_wipe_before_installation" target="_blank" rel="external">https://wiki.archlinux.org/index.php/Dm-crypt/Drive_preparation#dm-crypt_wipe_before_installation</a></p>
<h3 id="2-_Crie_o_container_encriptado">2. Crie o container encriptado</h3><ol>
<li><p>Crie uma partição do tipo 8E00 (LVM2 PV) para abrigar o container criptografado:</p>
<p>A partição pode ser criada no fdisk, cfdisk, parted ou gparted. No gparted, basta criar uma partição do tipo “lvm2 pv”.<br>Em nosso caso, a nova partição é <code>/dev/sdb1</code>.</p>
</li>
<li><p>Crie o container criptografado LUKS (usando opções default):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cryptsetup luksFormat /dev/sdb1</span></span><br></pre></td></tr></table></figure>
<p>Confirme com <code>YES</code> e digite uma senha duas vezes (<strong>essa senha será usada p/ destravar o container, sem ela … não temos acesso aos dados</strong>)</p>
</li>
<li><p>Destrave o container (disponibiliza de forma não criptografada):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cryptsetup open --type luks /dev/sdb1 container-destravado</span></span><br></pre></td></tr></table></figure>
<p>O container destravado está disponível em <code>/dev/mapper/container-destravado</code>.</p>
</li>
</ol>
<p><strong>Pronto</strong>, a parte relativa à criptografia está feita. O motivo de destravarmos o container é que criaremos <strong>no próximo passo</strong> a estrutura LVM dentro do container (e consequentemente as partições).</p>
<h2 id="Criando_estrutura_LVM_e_seu(s)_volume(s)_lógico(s)">Criando estrutura LVM e seu(s) volume(s) lógico(s)</h2><p>Com o container criptografado criado e destravado, é hora de criarmos a estrutura LVM segundo nossas preferências.</p>
<p>O procedimento agora <strong>não diz respeito à criptografia</strong>, mas ao manuseio normal de partições.</p>
<p>Vejamos um caso utilizando 1 physical volume (PV), dentro de 1 volume group (VG), contendo 1 logical volume (LV) ocupando todo o espaço disponível no disco. <strong>Ou seja</strong>, utilizamos um arranjo básico de LVM que implicará numa partição (em nosso caso, EXT4) ocupando todo o disco.</p>
<p>Procedimento:</p>
<ol>
<li><p>Crie um <em>physical volume</em> no container descriptografado:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pvcreate /dev/mapper/container-destravado</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Crie um <em>volume group</em>, e adicione o <em>physical volume</em> previamente criado:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vgcreate nome-do-vg /dev/mapper/container-destravado</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Crie um <em>logical volume</em> no <em>volume group</em>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lvcreate -l +100%FREE nome-do-vg -n nomeDoLg</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Formate o <em>logical volume</em> com um <em>filesystem</em>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkfs.ext4 /dev/mapper/nome--do--vg-nomeDoLg</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>Pronto, agora temos um arranjo LVM com uma partição EXT4 dentro de um container criptografado. Mas … como montamos e desmontamos essa partição no uso diário? Vejamos o último passo :D,</p>
<h2 id="Montando_e_desmontando">Montando e desmontando</h2><p>Para acessarmos o conteúdo das partições dentro do container criptografado … basta destravarmos o container e montar normalmente as partições. Vejamos como fazer isso manualmente e automaticamente.</p>
<ul>
<li><p>Manualmente:</p>
<ul>
<li><p>Montando:</p>
<ul>
<li><p>Destrave a container:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cryptsetup open --type luks /dev/sdb1 container-destravado</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Monte a partição desejada:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mount -t ext4 /dev/mapper/nome--do--vg-nomeDoLg /mnt/nomeDoLg/</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Desmontando:</p>
<ul>
<li><p>Desmonte a partição:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># umount /mnt/nomeDoLg/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Feche o container:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cryptsetup close container-destravado</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Automaticamente:</p>
<ul>
<li><p>Adicione uma entrada para a partição em <code>/etc/fstab</code>. Exemplo:</p>
<p><code>/dev/mapper/nome--do--vg-nomeDoLg       /mnt/nomeDoLg/  ext4    defaults     0       2</code></p>
</li>
<li><p>Adicione uma entrada para o container em <code>/etc/crypttab</code>. Exemplo:<br><code>container-destravado     UUID=4fdc96a2-5f97-44a5-783d-dcd0d0658fdd none luks</code><br>Obs: O UUID informado é o da partição utilizada para criar o container (em nosso caso <code>dev/sdb1</code>).</p>
</li>
</ul>
<p>O arquivo <code>/etc/crypttab</code> contém uma lista de <em>blockdevices</em> encriptados (aka containers) que são destravados no boot. O <code>crypttab</code> é lido antes do <code>fstab</code> e portanto destrava o container antes que os filesystems dentro dele sejam montados.</p>
</li>
</ul>
<h2 id="Links:"><span id="links">Links:</span></h2><ul>
<li><a href="https://wiki.archlinux.org/index.php/Disk_encryption" target="_blank" rel="external">Disk encryption - ArchWiki</a>: O que é e como funciona criptografia em discos, partições, etc. Tipos de criptografia no GNU/Linux, soluções utilizadas, etc. <strong>Recomendado</strong></li>
<li><a href="https://wiki.archlinux.org/index.php/Dm-crypt/Encrypting_a_non-root_file_system" target="_blank" rel="external">dm-crypt/Encrypting a non-root file system - ArchWiki</a>: Documentação suscinta e clara sobre como criar e montar partições criptografadas <em>non-root</em>.</li>
<li><a href="https://wiki.archlinux.org/index.php/Dm-crypt/Encrypting_an_entire_system" target="_blank" rel="external">dm-crypt/Encrypting an entire system - ArchWiki</a>: Documentação sobre diversas estratégias para criptografar o sistema inteiro.</li>
<li><a href="http://earlruby.org/2010/02/adding-an-external-encrypted-drive-with-lvm-to-ubuntu-linux/comment-page-1/" target="_blank" rel="external">Adding an external encrypted drive with LVM to Ubuntu Linux | Earl C. Ruby III</a>: Post sobre como criar e montar partições criptografadas <em>non-root</em>. A documentação do Arch é melhor, o destaque desse post é seu estilo simples e direto que serviu como inspiração para essas palavras.</li>
<li>Documentação Oficial Debian - Instalação c/ criptografia:<ul>
<li><a href="https://www.debian.org/releases/stable/amd64/ch06s03.html.en#partman-crypto" target="_blank" rel="external">6.3.3.6. Configuring Encrypted Volumes</a> em <a href="https://www.debian.org/releases/stable/amd64/ch06s03.html.en#di-partition" target="_blank" rel="external">6.3.3. Partitioning and Mount Point Selection</a>.</li>
<li><a href="https://www.debian.org/releases/stable/amd64/ch07s02.html.en" target="_blank" rel="external">7.2. Mounting encrypted volumes</a></li>
</ul>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>Nesse post veremos como adicionar novos HDs à sistemas GNU/Linux com os dados criptografados utilizando um mix de <a href="https://en.wikipedia.org/wiki/Logical_Volume_Manager_%28Linux%29">LVM</a> e <a href="https://en.wikipedia.org/wiki/Linux_Unified_Key_Setup">LUKS</a>.<br>Dessa forma, se o FBI obter aquele seu HD com todas as séries de Hollywood … não poderá acessar o conteúdo dele :D. E nem bisbilhoteiros em caso de perca ou roubo de seus HDs.</p>
<img src="/2015/04/19/criando-particoes-encriptadas-lvm-sobre-luks/criptografia-min.jpg">]]>
    
    </summary>
    
      <category term="criptografia" scheme="https://felipehw.github.io/tags/criptografia/"/>
    
      <category term="gnu/linux" scheme="https://felipehw.github.io/categories/gnu-linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Torrent profissa: gerenciamento remoto e servidor de compartilhamento 24hs]]></title>
    <link href="https://felipehw.github.io/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/"/>
    <id>https://felipehw.github.io/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/</id>
    <published>2015-03-24T01:29:26.000Z</published>
    <updated>2015-04-19T00:09:13.000Z</updated>
    <content type="html"><![CDATA[<p>O <a href="http://www.transmissionbt.com" target="_blank" rel="external">Transmission</a> é um cliente de torrent bastante conhecido no mundo GNU/Linux. Entretanto, há muitas pessoas que desconhecem que ele pode ser usado como um serviço (daemon) subindo sempre que a máquina está ligada e sem necessitar de interface gráfica para gerenciá-lo (pode ser gerenciado remotamente via browser, cli, gtk, etc.).</p>
<p>Se combinamos o serviço do Transmission com um <a href="http://www.raspberrypi.org/" target="_blank" rel="external">Raspberry Pi</a> baratinho, temos um servidor de compartilhar <del>pirataria</del> cultura 24 horas por dia que pode ser acessado remotamente via browser e gastando um ínfimo de energia.</p>
<img src="/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/copying_is_not_theft_min.jpg">
<a id="more"></a>
<p>A única “carência” do daemon do Transmission é que o mesmo só suporta protocolo HTTP, ou seja, sua senha para gerenciar os torrents trafega em <em>text plain</em>. Coloquei carência entre “” pq é uma opção dos desenvolvedores, os mesmos consideram que seu dever é fazer um cliente de torrent eficiente, a parte da criptografia pode ser feita com mais qualidade e segurança usando algum software complementar. No nosso caso, garantiremos uma conexão segura implementando HTTPS via servidor <a href="http://nginx.org/" target="_blank" rel="external">Nginx</a>.</p>
<p>Veremos primeiro como configurar o daemon Transmission e, opcionalmente, como aplicar HTTPS à conexão remota via Nginx.</p>
<p><strong>Obs</strong>: Nesse tutorial é usado o Debian Jessie. Provavelmente pode ser aplicado à outras distros <em>Debian like</em> sem muita adaptação.</p>
<h2 id="Subindo_seu_próprio_transmission-daemon">Subindo seu próprio <em>transmission-daemon</em></h2><h3 id="0-_Instalação">0. Instalação</h3><p>Instale o daemon do Transmission:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install transmission-daemon</span></span><br></pre></td></tr></table></figure>
<p>Junto com o daemon é instalado o pacote <code>transmission-cli</code>, que possibilita interagir com o daemon desde o prompt. Entretanto, o mesmo pode ser ignorado porque é possível gerenciar o daemon desde o browser (ou cliente gráfico como o <code>transmission-remote-gtk</code>).</p>
<h3 id="1-_Configuração">1. Configuração</h3><h4 id="1-1-_Arquivos_do_transmission-daemon">1.1. Arquivos do <em>transmission-daemon</em></h4><p>Os arquivos referentes ao daemon estão localizados no dir <code>/var/lib/transmission-daemon</code> em sistemas Debian. Temos, principalmente, os seguintes diretórios/arquivos:</p>
<ul>
<li><code>downloads/</code>: Dir padrão p/ download de torrent (definiremos outro).</li>
<li><code>info/settings.json</code>: Arquivo de configuração (link p/ <code>/etc/transmission-daemon/settings.json</code>)</li>
<li><code>info/stats.json</code>: Arquivo que reúne estatísticas da sessão (como quantia de download/upload).</li>
<li><code>info/torrents</code>: Armazena os arquivos <code>.torrent</code> adicionados para download.</li>
<li><code>info/resume</code>: Armazena info. sobre downloads em andamanento (partes baixadas, path, etc.).</li>
</ul>
<h4 id="1-2-_Editando_settings-json:">1.2. Editando <code>settings.json</code>:</h4><p>O arquivo com todas as configurações é <code>settings.json</code>. Editar o mesmo provavelmente exigirá permissões de <em>root</em>.</p>
<p>Recomendo que seja criado uma cópia da versão original, por via das dúvidas :D.</p>
<p>O arquivo utiliza a sintaxe <a href="https://pt.wikipedia.org/wiki/JSON" target="_blank" rel="external">JSON</a>. É uma sintaxe muito fácil de ser lida, mas que exige atenção ao editar. Qualquer <code>,</code>, <code>:</code> ou <code>&quot;</code> fora do lugar e o daemon não subirá. Ajuda bastante usar um parser online como esse <a href="http://jsonformatter.curiousconcept.com/" target="_blank" rel="external">aqui</a>, onde você pode colar seu arquivo de configuração e ver se colocou algo fora do lugar que viola a sintaxe.</p>
<p><strong>Atenção</strong>: Após a instalação, o daemon estará em execução e ao parar de executar, sobrescreverá qualquer mudança que possa ter ocorrido em <code>settings.json</code> enquanto estava rodando. Por isso, devemos parar o daemon:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># systemctl stop transmission-daemon</span></span><br></pre></td></tr></table></figure>
<p>Verifique se o daemon realmente parou:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># systemctl status transmission-daemon</span></span><br></pre></td></tr></table></figure>
<p>Maõs à obra!</p>
<p>O arquivo <code>settings.json</code> original vem com diversas configurações padrões. Alterei menos de 20 linhas e dessas eram realmente necessárias menos de 10. Começarei pelas que acho mais relevantes e citarei 4 à parte que considero menos interessantes mas que podem ser úteis para pessoas com roteadores mais fracos que podem ficar sobrecarregados por muitas conexões abertas pelo Transmission.</p>
<p>Configurações para alterar em <code>settings.json</code>:</p>
<ul>
<li><code>&quot;download-dir&quot;:</code> <del><code>&quot;/var/lib/transmission-daemon/downloads&quot;</code></del> <code>&quot;/dir/dos_downloads_quiridus&quot;</code>:<br>Onde colocar os downloads.</li>
<li><code>&quot;port-forwarding-enabled&quot;:</code> <del><code>false</code></del> <code>true</code><br>Habilitar encaminhamento de porta, útil para conexões atrás de NAT (comum em residências, se vc não sabe … habilite).</li>
<li><code>&quot;ratio-limit&quot;:</code> <del><code>2</code></del> <code>5</code><br>Taxa de compartilhamento … tás montando um server p/ torrents … aumente isso que 2 é pouco.</li>
<li><code>&quot;ratio-limit-enabled&quot;:</code> <del><code>false</code></del> <code>true</code><br>P/ aplicar a taxa de compartilhamento definida acima.</li>
<li><code>&quot;rpc-password&quot;:</code> <code>coloque_aqui_a_senha</code><br>Senha para acesso remoto. Não se preocupe, ela não é armazenada em texto limpo. Após iniciar o daemon, ela será substituída por um hash.</li>
<li><code>&quot;rpc-username&quot;:</code> <del><code>transmission</code></del> <code>seu_user_desktop</code><br>Login para acesso remoto. É informado com <code>&quot;rpc-password&quot;</code> para gerenciar remotamente o daemon. Pode ser mantido o username <code>transmission</code>, porém prefiro o username do meu usuário cotidiano.</li>
<li><code>&quot;rpc-whitelist-enabled&quot;</code> e <code>&quot;rpc-whitelist&quot;</code><br>Usados para delimitar quais IPs podem acessar o daemon. Eu mantenho a política default (respectivamente, <code>true</code> e <code>&quot;127.0.0.1&quot;</code>) que restringe o acesso à máquina local e realizo o acesso ao daemon a partir do Nginx instalado na máquina - <a href="#secao_nginx">ver abaixo</a> -. Dessa forma, qualquer máquina pode acessar o Transmission (via Nginx) mas sempre utilizando HTTPS.</li>
<li><code>&quot;speed-limit-up&quot;:</code> <del><code>100</code></del> <code>numero_desejado</code><br>Define o limite de upload em Kbps.</li>
<li><code>&quot;speed-limit-up-enabled&quot;:</code> <del><code>false</code></del> <code>true</code><br>Define se o limite de upload está ativo.</li>
<li><code>&quot;umask&quot;:</code> <del><code>18</code></del> <code>2</code><br>Define as permissões de acesso com que serão criados os arquivos e diretórios dos torrents. O valor segue o padrão utilizado pelo <a href="https://pt.wikipedia.org/wiki/Umask" target="_blank" rel="external">umask</a> mas escrito em decimal (portanto deve ser convertido para o tradicional octal do umask). O valor default é <code>18</code> (= 022 em octal) e equivale à <code>-rw-r--r--</code> p/ arquivos e <code>drwxr-xr-x</code> p/ dirs (proibe a permissão de escrita para o grupo e outros). Eu prefiro o valor <code>2</code> (= 002 em octal, duh!) que equivale à + permissiva <code>-rw-rw-r--</code> p/ arquivos e <code>drwxrwxr-x</code> p/ dirs (proibe apenas a permissão de escrita para outros).</li>
</ul>
<p>As opções que considero úteis para amenizar a carga sobre o roteador (útil para roteadores com pouca memória, cujo uso de torrents pode afogá-los) são as seguintes: <code>&quot;max-peers-global&quot;</code>, <code>&quot;peer-limit-global&quot;</code>, <code>&quot;peer-limit-per-torrent&quot;</code> e <code>&quot;upload-slots-per-torrent&quot;</code>. Não explicarei cada item, os valores são numéricos e basta diminuir para aliviar a pressão sobre o roteador. Os valores exatos são algo muito pessoal e devem ser experimentados.</p>
<p>O significado dessas 4 últimas opções bem como mais detalhes sobre todas as outras pode ser encontrado na <a href="https://trac.transmissionbt.com/wiki/EditConfigFiles" target="_blank" rel="external">documentação oficial</a>.</p>
<h4 id="1-3-_Definindo_permissões,_etc-">1.3. Definindo permissões, etc.</h4><p>O daemon é executado com o usuário <code>debian-transmission</code> e grupo <code>debian-transmission</code>. Sendo assim  o diretório definido p/ download (opção <code>&quot;download-dir&quot;</code>) deve ser acessível pelo usuário do daemon.</p>
<p>Por exemplo, altere a propriedade do diretório p/ o usuário e grupo <code>debian-transmission</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chown -R debian-transmission:debian-transmission /dir/dos_downloads_quiridus</span></span><br></pre></td></tr></table></figure>
<p>Se você alterou o valor de <code>umask</code> em <code>settings.json</code> de <code>18</code> p/ <code>2</code>, não apenas o usuário <code>debian-transmission</code> terá permissão de escrita como também os membros do grupo <code>debian-transmission</code>. Para aproveitarmos isso, precisaremos:</p>
<ul>
<li>dar permissões de escrita ao dir de download tb p/ o grupo:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chmod 775 /dir/dos_downloads_quiridus</span></span><br></pre></td></tr></table></figure>
<ul>
<li>inserir seu usuário cotidiano no grupo <code>debian-transmission</code>:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># usermod -a -G debian-transmission seu_username</span></span><br></pre></td></tr></table></figure>
<p>Pronto, temos o dir de download com as permissões corretas p/ o usuário e grupo <code>debian-transmission</code> e ainda adicionamos seu usuário cotidiano ao grupo <code>debian-transmission</code>, permitindo a ele apagar e etc. o conteúdo desse diretório.</p>
<h3 id="2-_Testando/Utilizando">2. Testando/Utilizando</h3><h4 id="2-1-_Testando">2.1. Testando</h4><p>Reinicie o daemon:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># systemctl restart transmission-daemon</span></span><br></pre></td></tr></table></figure>
<p>E acesse o daemon via browser em: <code>127.0.0.1:9091</code> (ou o IP da máquina se você liberou o acesso desde outras máquinas).</p>
<h4 id="2-2-_Pós-instalação">2.2. Pós-instalação</h4><ul>
<li><p>Via browser, vá em <em>Settings</em>, <em>Network</em> e verifique se a porta do torrent (por padrão, 51413) está aberta para à internet. Se não estiver, você deve liberar em seu roteador de casa (foge do escopo desse post, busque pela web :D). Caso não faça isso, a velocidade dos torrents ficará comprometida.</p>
</li>
<li><p>Se a interface via browser acusar erros de permissão de escrita, verifique se o usuário <code>debian-transmission</code> realmente possui as permissões de escrita e leitura adequadas para o diretório definido p/ download.</p>
</li>
</ul>
<h2 id="Protegendo_seu_transmission-daemon_com_HTTPS_(Nginx)"><span id="secao_nginx">Protegendo seu <em>transmission-daemon</em> com HTTPS (Nginx)</span></h2><p>Usaremos o <a href="http://nginx.org/" target="_blank" rel="external">Nginx</a> para criar um servidor proxy reverso que recebe conexões sobre HTTPS e redireciona para o daemon do Transmission. Isso fará com que a senha e as informações trafeguem entre o client remoto e o servidor de forma criptografada, sendo descriptografadas apenas para trafegar localmente no servidor (entre Nginx e Transmission daemon).</p>
<h3 id="0-_Instalação_do_Nginx">0. Instalação do Nginx</h3><p>Instale o Nginx:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install nginx</span></span><br></pre></td></tr></table></figure>
<h3 id="1-_Configuração_do_Nginx">1. Configuração do Nginx</h3><p>Diferente do daemon do Transmission, os arquivos de configuração não são sobrescritos quando o Nginx acaba de executar. Sendo assim, podemos editar o arquivo e simplesmente reiniciar o serviço do Nginx (que já estará em execução automaticamente após a instalação).</p>
<p>Crie o arquivo <code>/etc/nginx/sites-enabled/transmission</code> com o seguinte conteúdo:</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">server </span><span class="expression">&#123;</span><br><span class="line">  <span class="variable">server</span>_<span class="variable">name</span> <span class="variable">transmission</span>;</span><br><span class="line">  <span class="variable">listen</span> 8080 <span class="variable"><span class="keyword">default</span></span>_<span class="variable">server</span> <span class="variable">ssl</span>;</span><br><span class="line">  <span class="variable">ssl</span>_<span class="variable">certificate</span> <span class="end-block">/etc</span><span class="end-block">/nginx</span><span class="end-block">/trans.crt</span>;</span><br><span class="line">  <span class="variable">ssl</span>_<span class="variable">certificate</span>_<span class="variable">key</span> <span class="end-block">/etc</span><span class="end-block">/nginx</span><span class="end-block">/trans.key</span>;</span><br><span class="line"></span><br><span class="line">  <span class="variable">access</span>_<span class="variable">log</span> <span class="end-block">/var</span><span class="end-block">/log</span><span class="end-block">/nginx</span><span class="end-block">/transmission.access.log</span>;</span><br><span class="line"></span><br><span class="line">  <span class="variable">location</span> <span class="end-block">/ </span>&#123;</span><br><span class="line">    <span class="variable">proxy</span>_<span class="variable">pass</span> <span class="variable">http</span>:/<span class="end-block">/localhost</span>:9091;</span><br><span class="line">  &#125;</span><span class="xml"></span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>O arquivo é bem auto-explicativo. Criaremos um servidor proxy reverso que escutará requisições na porta 8080 usando criptografia e reencaminhará essa requisições para o servidor em <code>http://localhost:9091</code> (o daemon do Transmission).</p>
<p>A explicação detalhada da configuração do Nginx foge ao escopo do post mas na seção de links há documentação sobre o mesmo.</p>
<p>Por fim, gere o certificado utilizado pelo Nginx:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openssl req -x509 -nodes -new -keyout /etc/nginx/trans.key -out /etc/nginx/trans.crt</span></span><br></pre></td></tr></table></figure>
<p>E reinicie o serviço:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># systemctl restart nginx</span></span><br></pre></td></tr></table></figure>
<h3 id="2-_Testando/Utilizando-1">2. Testando/Utilizando</h3><p>Acesse o Transmission normalmente via <code>https://seu_ip:8080</code>. Agora a senha e os dados relativos ao gerenciamento do daemon do Transmission trafegarão de forma segura pela Internet.</p>
<p>Veja a tela do cliente para browsers do Transmission rodando sobre HTTPS:</p>
<img src="/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/transmission_com_https_via_browser.png">
<h2 id="Dicas">Dicas</h2><ul>
<li>Em seu computador pessoal utilize o software livre <code>transmission-remote-gtk</code> ao invés do browser. É mais prático que usar o browser, oferecendo uma experiência semelhante à programas de torrent tradicionais.<ul>
<li>Obs: O <code>transmission-remote-gtk</code> atualmente possui bugs abertos relativos à problemas em conectar em serviços usando HTTPS (como o <a href="https://code.google.com/p/transmission-remote-gtk/issues/detail?id=267" target="_blank" rel="external">#267</a>). Por hora, estou usando ele apenas quando estou na rede local, acessando diretamente o daemon (sem HTTPS). Para acessar diretamente o daemon, devo adicionar a rede local no whitelist: <code>&quot;rpc-whitelist&quot;: &quot;127.0.0.1, 192.168.*.*&quot;</code></li>
</ul>
</li>
<li>Em seu Android, utilize o software livre <a href="https://f-droid.org/repository/browse/?fdfilter=transdroid&amp;fdid=org.transdroid.full" target="_blank" rel="external">Transdroid</a> ao invés do browser. Assim, fica fácil mandar  baixar algo do busão e chegar em casa com o download completo.</li>
</ul>
<h2 id="Arquivos">Arquivos</h2><p>Seguem arquivos que talvez ajudem os que se percam na explicação:</p>
<ul>
<li><a href="/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/settings-original_json" title="/etc/transmission-daemon/settings.json original">/etc/transmission-daemon/settings.json original</a> do Debian Jessie (renomeie p/ <code>settings.json</code>).</li>
<li><a href="/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/settings-configurado_json" title="/etc/transmission-daemon/settings.json configurado">/etc/transmission-daemon/settings.json configurado</a>: configuração a partir das recomendações que fiz acima (renomeie p/ <code>settings.json</code>). Não esqueça de alterar o usuário e senha p/ acesso (<code>&quot;rpc-username&quot;</code> e <code>&quot;rpc-password&quot;</code>) assim como path p/ download (<code>&quot;download-dir&quot;</code>).</li>
<li><a href="/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/transmission" title="/etc/nginx/sites-enabled/transmission configurado">/etc/nginx/sites-enabled/transmission configurado</a> p/ redirecionar requisições sobre HTTPS na porta 8080 p/ servidor em <code>http://localhost:9091</code> (o daemon do Transmission).</li>
</ul>
<h2 id="Links">Links</h2><h3 id="Transmission">Transmission</h3><ul>
<li><a href="http://www.transmissionbt.com" target="_blank" rel="external">Transmission</a>: Site oficial</li>
<li><a href="https://trac.transmissionbt.com/" target="_blank" rel="external">trac.transmissionbt</a>: Wiki oficial.<ul>
<li><a href="https://trac.transmissionbt.com/wiki/ConfigFiles" target="_blank" rel="external">Configuration Files - trac.transmissionbt</a>: Informações gerais sobre os arquivos de configurações (local, nomes, função, etc.).</li>
<li><a href="https://trac.transmissionbt.com/wiki/EditConfigFiles" target="_blank" rel="external">Editing Configuration Files</a>: Informação sobre as opções e como modificar os arquivos de configuração.</li>
</ul>
</li>
<li><a href="https://forum.transmissionbt.com/" target="_blank" rel="external">Fórum Transmission</a>: Fórum oficial.</li>
<li><a href="https://blog.flo.cx/2014/03/adding-ssl-to-transmissions-web-interface/" target="_blank" rel="external">Adding SSL to transmission’s web interface… | blog.flo.cx</a>: Receita de bolo da mistura Transmission daemon + Nginx.</li>
</ul>
<h3 id="Nginx">Nginx</h3><ul>
<li><a href="http://nginx.org/" target="_blank" rel="external">Nginx</a>: Site oficial<ul>
<li><a href="http://nginx.org/en/docs/" target="_blank" rel="external">nginx documentation</a>: Documentação oficial.</li>
<li><a href="http://nginx.org/en/docs/beginners_guide.html" target="_blank" rel="external">Beginner’s Guide - Nginx</a>: Informação essencial para iniciantes.</li>
<li><a href="http://nginx.org/en/docs/http/configuring_https_servers.html" target="_blank" rel="external">Configuring HTTPS servers</a>: Como configurar servidores HTTPS c/ certificado, etc.</li>
</ul>
</li>
<li><a href="http://wiki.nginx.org/Main" target="_blank" rel="external">Nginx Community</a>: Wiki comunitária do Nginx.<ul>
<li><a href="http://wiki.nginx.org/Configuration" target="_blank" rel="external">Configuration - Nginx Community</a>: Links sobre configuração.</li>
</ul>
</li>
<li><a href="nginx - ArchWiki">nginx - ArchWiki</a>: Documentação do Arch Linux sobre Nginx. Bem completa.</li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-configure-the-nginx-web-server-on-a-virtual-private-server" target="_blank" rel="external">How To Configure The Nginx Web Server On a Virtual Private Server | DigitalOcean</a>: Ótima introdução ao Nginx - explicando sintaxe, etc.</li>
</ul>
<h3 id="Bônus">Bônus</h3><ul>
<li><a href="https://www.youtube.com/watch?v=R1QnXJYT9ao" target="_blank" rel="external">Copy is not theft - Nina Paley</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>O <a href="http://www.transmissionbt.com">Transmission</a> é um cliente de torrent bastante conhecido no mundo GNU/Linux. Entretanto, há muitas pessoas que desconhecem que ele pode ser usado como um serviço (daemon) subindo sempre que a máquina está ligada e sem necessitar de interface gráfica para gerenciá-lo (pode ser gerenciado remotamente via browser, cli, gtk, etc.).</p>
<p>Se combinamos o serviço do Transmission com um <a href="http://www.raspberrypi.org/">Raspberry Pi</a> baratinho, temos um servidor de compartilhar <del>pirataria</del> cultura 24 horas por dia que pode ser acessado remotamente via browser e gastando um ínfimo de energia.</p>
<img src="/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/copying_is_not_theft_min.jpg">]]>
    
    </summary>
    
      <category term="compartilhamento" scheme="https://felipehw.github.io/tags/compartilhamento/"/>
    
      <category term="debian" scheme="https://felipehw.github.io/tags/debian/"/>
    
      <category term="pirataria" scheme="https://felipehw.github.io/tags/pirataria/"/>
    
      <category term="torrent" scheme="https://felipehw.github.io/tags/torrent/"/>
    
      <category term="cultura livre" scheme="https://felipehw.github.io/categories/cultura-livre/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Proteja seus dados: backups fáceis e seguros no desktop GNU/Linux]]></title>
    <link href="https://felipehw.github.io/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/"/>
    <id>https://felipehw.github.io/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/</id>
    <published>2015-03-14T19:02:35.000Z</published>
    <updated>2015-03-15T00:14:56.000Z</updated>
    <content type="html"><![CDATA[<p>Os dados são de longe a coisa mais importante em nossos velhos notebooks, verdade?<br>Então pq diabos a maioria de nós nunca realiza backups e conta com a sorte do HD nunca falhar ou de nunca haver uma remoção acidental de arquivos?</p>
<p>Parte das pessoas diz que é trabalhoso fazer backup ou que não sabe usar ferramentas para automatizar o processo …</p>
<p><strong>Seus problemas acabaram!</strong> Veremos abaixo como realizar backups de forma automatizada, segura, encriptada, “zipada”, incremental, o escambau … e ainda por cima … muito, mas muito facilmente!</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/deja-dup.png">
<a id="more"></a>
<p>O Déjà Dup é o software (livre) da vez, ele é dedicado à backups para usuários finais. Assim, ele visa garantir backups seguros e eficientes mas escondendo toda complexidade do usuário final.</p>
<p>Veja alguns dos recursos + legais que ele oferece:</p>
<ul>
<li><strong>Agendamento</strong>: Por meio dele podemos agendar para que os backups sejam feitos automaticamente de tempos em tempos (sem desculpas p/ esquecimento :D) ou manualmente.</li>
<li><strong>Múltiplos backends</strong>: O backup não precisa ser em outro HD, pode ser na nuvem, num servidor FTP próprio, etc. Muito flexível :D.</li>
<li><strong>Encriptação</strong>: O backup é guardado de forma encriptada, ou seja, se alguém conseguir acessar seu backup … sem senha nada feito!</li>
<li><strong>Compressão</strong>: O backup também é comprimido, ou seja, tudo é compactado de forma a ocupar menos espaço que os arquivos originais.</li>
<li><strong>Incremental</strong>: O backup é incremental, <strong>MAS</strong> que diabos é incremental?<br>Bom, de tempos em tempos são feitos <strong>backups integrais</strong> (o backup é feito do zero, de todos os dados) e os backups seguintes são apenas das modificações que ocorreram nesse meio tempo (arquivos modificados, criados e deletados) - <em>aka</em> <strong>backups incrementais</strong>. Dessa forma, ocupando um mínimo de espaço, podemos ter o estado dos dados em diversos momentos ao longo do tempo!<br><strong>Tá … mas qual a vantagem disso?</strong><br>A vantagem é que não apenas escolhemos que queremos recuperar os dados … mas podemos escolher o estado em que estes dados estavam num certo momento.<br>Exemplo: Você percebeu que apagou um dado importante só após 3 semanas, e os backups são feitos de forma semanal. Sem problemas! É só pegar o backup da semana em que o arquivo ainda existia ou não havia sido modificado de forma indesejada.</li>
</ul>
<p>Tá, me convenceu, como faço agora? Vamos à instalação e configuração!</p>
<h2 id="0-_Instalação">0. Instalação</h2><p>No Debian Jessie, basta instalar o pacote <code>deja-dup</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install deja-dup</span></span><br></pre></td></tr></table></figure>
<p>Como o programa é popular, não será difícil encontrá-lo empacotado em outras distribuições GNU/Linux.</p>
<h2 id="1-_Configuração">1. Configuração</h2><p>Abra o programa <code>deja-dup</code>. Vejamos o que podemos fazer, tela por tela:</p>
<ul>
<li><p><em>Visão geral</em>: O programa abrirá na tela “Visão geral”. Aqui podemos restaurar backups ou manualmente iniciar a realização de um backup (após configurar o mesmo).</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/1-visao_geral.png">
<p>Após o primeiro backup, passa a ser informado também a data do último backup e quantos dias faltam para o próximo backup automático (se estiver habilitado).</p>
</li>
<li><p><em>Pastas para salvar</em>: Aqui devemos escolher as pastas que devem ser salvas. O padrão é o diretório do usuário inteiro … o que eu acho um pouco de exagero. No meu caso, faço backup apenas dos dados importantes e não dos terabytes de filmes e músicas.</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/2-pastas_para_salvar.png">
</li>
<li><p><em>Pastas a serem ignoradas</em>: Nessa tela podemos excluir do backup alguma subpasta dentro das pastas marcadas para backup. Esse recurso é muito útil para excluir alguma pasta que ocupa muito espaço com arquivos não importantes. No meu caso, sempre faço backups de minhas coisas linux mas marco para ficar de fora imagens de instalação, etc,</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/3-pastas_a_serem_ignoradas.png">
</li>
<li><p><em>Local de armazenamento</em>: Aqui escolhemos … onde armazenar o backup (duh). Há diversas opções (que vão desde uma pasta local à opções remotas como a nuvem). <strong>Escolha um local com espaço suficiente e que não seja o mesmo HD</strong> (pq se ele falhar, você perde os dados e o backup dos dados). Larga de ser mão de vaca e compre um HD novo se precisar (300 reais são menos importantes que as fotos e arquivos de uma vida inteira).<br>No meu caso, realizo o backup dos meus dados do notebook para um HD externo montado na pasta <code>/mnt/backup/</code> (mais precisamente na pasta <code>/mnt/backup/data</code>).</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/4-local_de_armazenamento.png">
</li>
<li><p><em>Agendado</em>: Nessa tela, escolhemos a frequência de realização dos backups e o tempo mínimo que eles serão mantidos. A tradução para o português não está um brinco … mas as opções são:</p>
<ul>
<li><em>Todos</em>: Aqui podemos escolher se o backup será feito semanalmente (opção “Semana”) ou diariamente (opção “Dia”).</li>
<li><em>Manter</em>: Aqui escolhemos se os backups serão mantidos “Pelo menos seis meses”, “Pelo menos um ano” ou “Para sempre”. Se faltar espaço, os backups + antigos são deletados + cedo.</li>
</ul>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/5-agendado.png">
<p><strong>Repare</strong> que só é possível escolher alguma opção de <em>Todos</em> se o backup automático (agendado) está ativado. Ele é ativado/desativado clicando no On/Off no canto superior da janela (perto do <code>X</code> p/ fechar a janela)</p>
</li>
</ul>
<p><strong>Pronto</strong>! Se você ativou o backup agendado … é só esperar que uma vez por semana (ou dia) o backup será realizado. <strong>Se no dia do backup o computador estiver desligado, sem problema</strong> … na próxima vez que você ligar o computador e se logar, o Déjà Dup inicia o backup (e avisa você através de uma janela).</p>
<p>Você, inclusive não precisa esperar … na tela “Visão geral” podemos iniciar o backup manualmente (ou apenas ver quantos dias faltam para o próximo backup) e recuperar o backup de algum momento (ou apenas ver quando foi o último backup).</p>
<p>No meu caso, eu faço backup para um HD externo que nem sempre está ligado ao notebook. Por isso, deixo o backup automático desativado (opção “Off” no canto superior da janela) e realizo manualmente na tela “Visão geral” com um frequência +- mensal (e fácil de acompanhar pq ele avisa a data do último backup).</p>
<h2 id="2-_O_primeiro_backup_(a_gente_nunca_esquece)">2. O primeiro backup (a gente nunca esquece)</h2><p>Na criação do primeiro backup (seja ao ativar o backup agendado ou fazendo backups manuais) será perguntado se dejamos criptografar o backup para que o mesmo seja acessível apenas com senha. Eu recomendo que os dados sejam protegidos de bisbilhoteiros :D</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/6-1ro_backup_senha.png">
<p>Na sequência, será iniciado a confecção do backup:</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/7-1ro_backup_criando.png">
<p>Pronto, backup feito:</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/8-1ro_backup_feito.png">
<ul>
<li><strong>Obs</strong>: O primeiro backup demora bastante, os futuros são, em sua maioria, incrementais (somente o que mudou desde o último backup) e portanto … bem rápidos.</li>
</ul>
<h2 id="3-_Recuperando_backups">3. Recuperando backups</h2><p> 3.1. Para recuperar backups, na tela “Visão geral” clique em “Restaurar…” e escolha de onde o backup será recuperado (o mesmo local onde escolhemos guardar os backups na tela “Local de armazenamento”):</p>
 <img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/9-restaurar_backup_de_onde.png">
<p> No meu caso, eu escolhi guardar os backups na pasta <code>/mnt/backup/data</code> e é esse local que devo informar.</p>
<p> 3.2. Escolha entre os backups existentes pela data (dia):</p>
 <img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/10-restaurar_backup_de_quando.png">
<p> 3.3. Finalmente escolha se deseja recuperar os arquivos do backup para seus lugares originais ou para outra pasta qualquer.</p>
 <img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/11-restaurar_backup_para_onde.png">
<p> 3.4. Serão exibidas as opções escolhidas previamente, confirme se deseja realmente recuperar o backup.</p>
 <img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/12-restaurar_confirmar.png">
<p> 3.5. Se você optou por proteger com senha, será necessário informar a senha:</p>
 <img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/13-restaurar_senha.png">
<p> Pronto! Os arquivos do backup estão acessíveis novamente :D</p>
 <img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/14-restaurar_concluida.png">
<ul>
<li><strong>Obs1</strong>: Fique tranquilo que ao recuperar um backup, o mesmo não é deletado. Você pode recuperar o mesmo backup indefinidas vezes.</li>
<li><p><strong>Obs2</strong>: Fique ligado que se já houver arquivos na pasta escolhida para receber o backup recuperado, os arquivos que possuírem os mesmos nomes que arquivos existentes no backup serão sobrescritos. Os arquivos que não colidirem os nomes com arquivos existentes no backup sobreviverão intocados.</p>
<p>Bom, é isso. Até a próxima.</p>
</li>
</ul>
<h2 id="Links">Links</h2><ul>
<li><a href="https://wiki.gnome.org/Apps/DejaDup" target="_blank" rel="external">Apps/DejaDup - GNOME Wiki!</a>: Página oficial do Déjà Dup.<ul>
<li><a href="https://wiki.gnome.org/Apps/DejaDup/HowItWorks" target="_blank" rel="external">Apps/DejaDup/HowItWorks - GNOME Wiki!</a>: Material curto e excelente, explicando como funciona o Déjà Dup. Incluindo:<ul>
<li>como e quando ele realiza backups</li>
<li>o formato dos arquivos do backup (e como funciona a criptografia aplicada nesses dados)</li>
<li>o modo como trabalha com backups integrais e incrementais</li>
<li>por quanto tempo os backups são mantidos após o período definido pelo usuário, etc.</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>Os dados são de longe a coisa mais importante em nossos velhos notebooks, verdade?<br>Então pq diabos a maioria de nós nunca realiza backups e conta com a sorte do HD nunca falhar ou de nunca haver uma remoção acidental de arquivos?</p>
<p>Parte das pessoas diz que é trabalhoso fazer backup ou que não sabe usar ferramentas para automatizar o processo …</p>
<p><strong>Seus problemas acabaram!</strong> Veremos abaixo como realizar backups de forma automatizada, segura, encriptada, “zipada”, incremental, o escambau … e ainda por cima … muito, mas muito facilmente!</p>
<img src="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/deja-dup.png">]]>
    
    </summary>
    
      <category term="backup" scheme="https://felipehw.github.io/tags/backup/"/>
    
      <category term="debian" scheme="https://felipehw.github.io/tags/debian/"/>
    
      <category term="segurança" scheme="https://felipehw.github.io/tags/seguranca/"/>
    
      <category term="gnu/linux" scheme="https://felipehw.github.io/categories/gnu-linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie]]></title>
    <link href="https://felipehw.github.io/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/"/>
    <id>https://felipehw.github.io/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/</id>
    <published>2015-03-08T04:08:20.000Z</published>
    <updated>2015-03-08T01:24:03.000Z</updated>
    <content type="html"><![CDATA[<p>Esse post é do <em>dark side</em>. É sobre como instalar o driver proprietário da Nvidia no Debian Jessie, dado que o estado do driver livre infelizmente é bem insatisfatório. A própria Nvidia sempre boicotou o desenvolvimento do driver livre (<a href="http://nouveau.freedesktop.org/wiki/" target="_blank" rel="external">nouveau</a>) e só recentemente começou a prestar alguma ajuda.</p>
<img src="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/darth-vader.png">
<a id="more"></a>
<p>A tecnologia <a href="http://www.nvidia.com/object/optimus_technology.html" target="_blank" rel="external">NVIDIA Optimus</a> permite aos notebooks utilizarem a placa de vídeo onboard no cotidiano e, apenas quando necessário, fazer uso da placa de vídeo dedicada (Nvidia). Isso é essencial para que a bateria tenha longa duração, dado que a placa de vídeo dedicada é ativada apenas quando necessário (e ela consome bastante energia :/).</p>
<p>O projeto que se dedica a suportar essa tecnologia no GNU/Linux é o <a href="http://bumblebee-project.org/" target="_blank" rel="external">Bumblebee</a>. Podemos usar ele com o driver livre (nouveau) e o driver proprietário. Como o driver proprietário da Nvidia é bem maduro no GNU/Linux, conseguimos por meio dele usar todo o potencial da placa de vídeo e por meio do Bumblebee economizar o máximo de energia possível.</p>
<p>A instalação no Debian antes do Jessie exigia alguma atenção, mas no Jessie os pacotes já estão nos repositórios e o processo é bem direto.</p>
<p>Vamos pôr a mão na massa:</p>
<h3 id="0-_Adicione_suporte_aos_repositórios_com_softwares_proprietários">0. Adicione suporte aos repositórios com softwares proprietários</h3><p>Antes de mais nada, os repositórios com softwares proprietários (<code>non-free</code>) e dependentes de proprietários (<code>contrib</code>) devem estar habilitados.</p>
<p>Para tanto, adicione no final das linhas de repositórios para o Jessie as palavras <code>non-free</code> e <code>contrib</code> em <code>/etc/apt/sources.list</code>. Exemplo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://debian.pop-sc.rnp.br/debian/ jessie main contrib non-free</span><br><span class="line">deb-src http://debian.pop-sc.rnp.br/debian/ jessie main contrib non-free</span><br></pre></td></tr></table></figure>
<p>Depois atualize os dados referentes aos repositórios executando:<br><code># apt-get update</code></p>
<h3 id="1-_Instalação">1. Instalação</h3><ul>
<li><p>Instale os pacotes necessários p/ o Bumblebee e o driver proprietário Nvidia:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install bumblebee-nvidia primus</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Apenas para Debian 64 bits</strong>. Permite que utilizemos o Bumblebee inclusive quando rodando aplicações 32 bits em sistemas 64 bits (essencial para diversos jogos no <a href="steampowered.com">Steam</a>):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dpkg --add-architecture i386 &amp;&amp; apt-get update &amp;&amp; apt-get install primus-libs:i386</span></span><br></pre></td></tr></table></figure>
<p>Atenção: Se durante a instalação, lhe for perguntado se deseja criar um arquivo <code>xorg.conf</code> responda que <strong>não</strong>. Essa pergunta se aplica apenas a sistemas que usam uma única placa (Nvidia - aka sem Optimus). Também não execute <code>nvidia-xconfig</code>.</p>
</li>
</ul>
<h3 id="2-_Pós-instalação">2. Pós-instalação</h3><p>Adicione os usuários que forem utilizar da placa Nvidia via Bumblebee ao grupo <code>bumblebee</code>:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># adduser $USER bumblebee</span></span><br></pre></td></tr></table></figure></p>
<p>Caso o usuário não seja adicionado, o mesmo não conseguirá chavear entre a placa de vídeo onboard e offboard.</p>
<p>Pronto! Tudo instalado e pós-instalado.</p>
<h3 id="3-_Utilização">3. Utilização</h3><p>O sistema estará por padrão utilizando sempre a placa onboard. Para utilizarmos a placa dedicada Nvidia, devemos executar a aplicação desejada por meio de um dos seguintes executáveis: <code>primusrun</code> ou <code>optirun</code>.</p>
<p>O <code>primusrun</code> é mais novo que <code>optirun</code>, tende a substituí-lo e possui maior performance (preferencial).</p>
<p>Exemplo de utilização:</p>
<ul>
<li><code>$ primusrun [options] &lt;application&gt; [application-parameters]</code></li>
<li><code>$ optirun [options] &lt;application&gt; [application-parameters]</code></li>
</ul>
<p>Executando o Steam c/ o <code>primusrun</code>: <code>$ primusrun steam</code>.</p>
<p>Como visto, assim temos um controle bem grande sobre quando uma ou outra placa deve ser usada. Aqui (com as observações abaixo feitas ao Steam) tenho rodado os jogos com toda a performance possível, e no restante do tempo a bateria dura e o notebook fica silencioso :D.</p>
<h4 id="3-1_Utilizando_Bumblebee_c/_Steam">3.1 Utilizando Bumblebee c/ Steam</h4><ul>
<li><p>Economizando energia no Steam:<br>Se executamos o Steam assim <code>$ primusrun steam</code>, gastaremos energia à toa pois estamos com a placa Nvidia ativada sempre (mesmo enquanto navegamos pelo Steam ou executamos jogos leves).<br>A forma ideal é configurar o jogo que necessitar da Nvidia defindo que o mesmo deve ser executado com o comando <code>primusrun %command%</code> (ou <code>optirun %command%</code>) em: <em>Properties</em> -&gt; <em>General</em> -&gt; <em>Set Launch Options…</em>.</p>
</li>
<li><p>Jogos que nao funcionarem no Debian Jessie c/ Optimus:<br>Pode ocorrer da versão errada do libGL estar sendo carregada. Para corrigir isso:</p>
<ol>
<li><p>Localize a versão correta do libGL:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ locate libGL.so</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure o Steam p/ carregar o jogo com a versao correta (em <em>Properties</em> -&gt; <em>General</em> -&gt; <em>Set Launch Options…</em>.). Exemplo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libGL.so.<span class="number">1</span> primusrun %<span class="built_in">command</span>%</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>Fonte: <a href="https://wiki.archlinux.org/index.php/steam" target="_blank" rel="external">Steam - ArchWiki</a></p>
<h2 id="Links">Links</h2><ul>
<li><a href="https://wiki.debian.org/Bumblebee#Usage" target="_blank" rel="external">Bumblebee - Debian Wiki</a>: Documentação da Wiki Debian sobre a instalação do Bumblebee. Simples e direta.</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>Esse post é do <em>dark side</em>. É sobre como instalar o driver proprietário da Nvidia no Debian Jessie, dado que o estado do driver livre infelizmente é bem insatisfatório. A própria Nvidia sempre boicotou o desenvolvimento do driver livre (<a href="http://nouveau.freedesktop.org/wiki/">nouveau</a>) e só recentemente começou a prestar alguma ajuda.</p>
<img src="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/darth-vader.png">]]>
    
    </summary>
    
      <category term="dark side" scheme="https://felipehw.github.io/tags/dark-side/"/>
    
      <category term="debian" scheme="https://felipehw.github.io/tags/debian/"/>
    
      <category term="nvidia" scheme="https://felipehw.github.io/tags/nvidia/"/>
    
      <category term="steam" scheme="https://felipehw.github.io/tags/steam/"/>
    
      <category term="gnu/linux" scheme="https://felipehw.github.io/categories/gnu-linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Instalando Debian Jessie usando criptografia de disco]]></title>
    <link href="https://felipehw.github.io/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/"/>
    <id>https://felipehw.github.io/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/</id>
    <published>2015-02-28T20:27:02.000Z</published>
    <updated>2015-05-10T14:34:09.000Z</updated>
    <content type="html"><![CDATA[<p>O primeiro tema do blog é a instalação do Debian Jessie usando criptografia de disco. Escrevi o post porque consegui comprar meu primeiro notebook e ao contrário dos desktops que tive antes … tenho de me preocupar com os dados em caso de <del>perca</del> perda ou roubo.</p>
<p>A melhor maneira de se prevenir contra <del>perca</del> perda ou roubo é criptografando os dados e para tanto optei em instalar o Debian numa partição completamente criptografada. Assim … nem a PF consegue os dados :D.</p>
<p>O post <strong>não</strong> é indicado para quem nunca instalou um GNU/Linux na vida (não desista, há vários por aí :D), mas para quem nunca instalou um Debian.</p>
<p>A versão do Debian que optei é a Jessie (v8), ela está quase saindo do forno (é <strong>testing</strong> mas está em <em>freeze</em>, portanto só aceita correção de bugs). Existem pouquíssimos bugs nela (me deparei mais com eles na instalação do que no uso do dia-a-dia) e certamente o que está aqui valerá para a versão final que sairá em algumas semanas.</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/jessie.png">
<a id="more"></a>
<p><strong>Bom, vamos lá:</strong></p>
<h2 id="0-_Backup_dos_dados_existentes_(disco_será_integralmente_utilizado)">0. Backup dos dados existentes (disco será integralmente utilizado)</h2><p>O passo zero não será descrito e depende de cada um. O instalador do Debian automatiza o processo de formatar, particionar e configurar a criptografia em disco desde que optemos por instalá-lo usando inteiramente um disco. Portanto, faça um backup dos dados e deixe o disco pronto para a instalação.</p>
<p>Caso não desejes reservar um disco inteiro para o Debian, é plenamente possível instalá-lo em apenas uma parte do disco com criptografia e etc. (o sobrenome do GNU/Linux é configurabilidade) mas não será coberto nesse post :P.</p>
<h2 id="1-_Download_da_imagem_do_Debian:">1. Download da imagem do Debian:</h2><p>Primeiro baixe uma imagem do Debian Jessie em <a href="https://www.debian.org/CD/http-ftp/" target="_blank" rel="external">https://www.debian.org/CD/http-ftp/</a> e grave numa pendrive (ou CD/DVD - alguém usa isso?).</p>
<p>No momento que escrevo o Jessie é testing, portanto é o link <a href="http://cdimage.debian.org/cdimage/weekly-builds/" target="_blank" rel="external">Official CD/DVD images of the “testing” distribution (regenerated weekly)</a> mas em breve será o link <a href="https://www.debian.org/CD/http-ftp/#stable" target="_blank" rel="external">Official CD/DVD images of the “stable” release</a>.</p>
<h2 id="2-_Instalando_c/_criptografia:">2. Instalando c/ criptografia:</h2><p>Reinicie a máquina com a pendrive espetada e siga as seguintes opções:</p>
<ul>
<li><p>Ao iniciar a imagem de instalação, escolha <em>Graphical install</em>:</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-graphical_install.png">
</li>
<li><p>Selecione como linguaguem “Português Brasil” e na sequência a localidade como “Brasil”:</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-select_a_language.png">
</li>
<li><p>Na próxima tela (“Configure o teclado”) escolha o teclado apropriado. “Português brasileiro” para teclado ABNT (com cedilha) ou “Inglês americano” para teclado sem cedilha.</p>
</li>
</ul>
<ul>
<li><p><strong>Caso seu computador possua hardware de rede que necessita de firmware proprietário</strong> chegaremos à parte mais chatinha (<strong>se não precisar</strong> o instalador pula essa etapa, agradeça ao seus fabricantes de hardware e <strong><a href="#configurarrede">pule uma seção</a></strong> :D).</p>
<p>O Debian perguntará (tela “Detectar hardware de rede”) se você deseja oferecer o firmware (ausente na instalação pq ñ é software livre). É um caso comum p/ placas de rede wireless e algumas cabeadas.</p>
<p>A vantagem de usar a rede na instalação é que são baixadas atualizações além de configurarmos a rede e o endereço do repositório de pacotes utilizado pelo sistema. No meu caso, tive azar … tanta a placa de rede cabeada quanto wireless precisam de firmware proprietário. <strong>Caso seja o seu caso</strong> (malditos fabricantes que <del>não colaboram com</del> boicotam o software livre):</p>
<ol>
<li>Anote os firmwares necessários informados pelo Debian (no meu caso, ele informou os arquivos <code>iwlwifi-6000g2b-6.ucode</code> - wifi- e, <code>rtl_nic/rtl8411-1.fw</code>  -cabeada-).</li>
<li>Faça os procedimentos informados abaixo em <a href="#firmwares">Firmwares</a> para obter os arquivos.</li>
<li>Ofereça os arquivos nesse ponto da instalação, inserindo uma segunda pendrive quando pedido.</li>
</ol>
<p><strong>Ou</strong> dê um belo f@#$-@# nos dois últimos passos, continue sem os firmwares e instale manualmente os pacotes com os firmwares após a instalação (tb explicado em <a href="#firmwares">Firmwares</a>).</p>
</li>
<li><p><span id="configurarrede"></span>Após o suplício causado pelas empresas que não lançam nem colaboram com drivers livres (ou caso seu computador esteja livre desses hardwares), chegamos à configuração da rede (Tela “Configurar a rede”).</p>
<p>A configuração é simples. No meu caso, fiz a configuração mais “complicada” (rede sem fio):</p>
<ul>
<li>Escolhi a interface: <code>wlan0</code> (<code>wlan0</code> era a placa wifi, <code>eth0</code> a placa cabeada).</li>
<li>Em “Escolher SSID”, informei o nome da rede sem fio.</li>
<li>Em “Tipo da rede sem fio …”: <code>WPA/WPA2 PSK</code> (<code>WPA/WPA2 PSK</code> é a + comum e segura; <code>Rede Aberta/WEP</code> é + antiga e insegura).</li>
<li>Em “Frase secreta”: Senha da rede.</li>
</ul>
<p>Depois de configurar a forma de acesso à rede é só informar o “Nome da máquina” (qualquer um) e o “Nome de domínio” (se não souber/tiver, qualquer um).</p>
</li>
<li><p>O próximo passo é configurar usuários e senhas (tela “Configurar usuários e senhas”). Defina a senha do root bem como login e senha de um usuário normal:</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-configurar_usuarios_e_senhas.png">
</li>
<li><p>Na tela “Configurar o relógio”, defina o fuso horário correto escolhendo seu estado na lista (ex: “Santa Catarina”).</p>
</li>
<li><p>Finalmente, chegamos à tela do particionador de discos:</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-particionar_discos.png">
<p>É aqui que definiremos que o sistema operacional seja instalado num sistema de arquivo sob criptografia. Iremos utilizar um disco inteiro (portanto, apagaremos qualquer coisa que exista nele)</p>
<p>Siga os seguintes passos:</p>
<ol>
<li>Escolha “Assistido - usar disco todo e LVM criptografado”</li>
<li>Selecione o disco a ser formatado e particionado (escolhi o disco <code>sda</code>).</li>
<li>Na tela “Esquema de particionamento” escolha “Todos os arquivos em uma partição (para iniciantes)” pois como estamos usando <a href="https://en.wikipedia.org/wiki/Logical_Volume_Manager_%28Linux%29" target="_blank" rel="external">LVM</a> é fácil redimensionar depois e criar as partições desejadas (post futuro).</li>
<li>Responda “Sim” à pergunta “Gravar as mudanças nos discos e configurar LVM?”.<br>O disco será sobrescrito com dados aleatório para aumentar a segurança (dificulta diferenciar o que possui dados do que ainda está vazio).</li>
<li>Agora é solicitada uma “frase criptográfica” para desbloquear o disco sempre que o sistema <em>bootar</em>. Atenção, se você esquecer essa senha … adeus dados :D.</li>
<li>Finalmente, confirme tudo escolhendo a opção “Finalizar o particionamento e escrever as mudanças no disco” e depois respondendo “Sim” à pergunta “Escrever as mudanças nos discos?”.<br>As partições serão criadas e o sistema básico instalado.</li>
</ol>
</li>
<li><p>Na tela “Configurar o gerenciador de pacotes”:</p>
<ol>
<li>Responda “Não” à pergunta “Ler outro CD ou DVD?”</li>
<li>Responda “Sim” à pergunta “Usar um espelho de rede?” se você tiver acesso à internet durante à instalação.<br>2.1. Escolha o Brasil, como país do espelho e algum dos repositóris disponíveis.<br>2.2. Opcionalmente, informe um proxy (se você não sabe o que é … não precisa de um :D).<br>Será configurado o acesso ao repositório, baixada e instalada as atualizações existentes.</li>
</ol>
</li>
<li><p>Na tela “Configurando popularity-contest” podemos optar por enviar dados anônimos sobre os pacotes instalados. Essa informação é usada para decidir os pacotes que são colocados no primeiro CD da distribuição.</p>
</li>
<li><p>Na tela “Seleção de software” podemos escolher coleções de software para serem instaladas além do sistema básico. Na dúvida, a seleção padrão possui o necessário para ambientes desktop.</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-selecao_de_software.png">
</li>
<li><p>Por fim na tela “Instalar o carregador de inicialização GRUB em um disco rígido”:</p>
<ol>
<li>Responsa “Sim” à pergunta “Instalar o carregador de inicialização GRUB no registro mestre de inicialização?”.</li>
<li>Escolha o disco rídigo para gravar o GRUB (responsável por viabilizar o boot do sistema operacional): No meu caso, escolhi meu primeiro disco (<code>/dev/sda</code>).</li>
</ol>
</li>
<li><p>Pronto, basta reiniciar o sistema:</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-instalacao_completada.png">
</li>
<li><p>No boot será pedido a “frase criptográfica” (sem ela é impossível acessar os dados da partição):</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-pedindo_frase_criptografica.png">
</li>
<li><p>Após o boot, eis o GNOME do Debian Jessie em toda sua glória (e com a merecida segurança oferecida pela criptografia):</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/debian8amd64-desktop.png">
</li>
</ul>
<h2 id="Extras">Extras</h2><h3 id="Firmwares"><span id="firmwares">Firmwares</span></h3><ul>
<li><p>Para conseguir exatamente os firmwares faltando:</p>
<ol>
<li>Pesquise pelos arquivos de firmware mencionados pelo instalador no site <a href="https://www.debian.org/distrib/packages" target="_blank" rel="external">Debian — Packages</a>, por meio do instrumento de busca “Search the contents of packages”. Será indicado o pacote .deb contendo o firmware.</li>
<li>Realize o download do pacote.</li>
<li>Copie o pacote para o diretório raiz de um pendrive formatado em FAT.</li>
<li>Insira a pendrive quando solicitada durante a instalação.</li>
</ol>
<p>No caso dos arquivos <code>rtlwifi/rtl8723befw.bin</code> e <code>rtl_nic/rtl8411-1.fw</code>, ambos estavam no pacote <code>firmware-realtek</code>.<br>No caso do arquivo <code>iwlwifi-6000g2b-6.ucode</code>, está no pacote <code>firmware-iwlwifi</code>.</p>
</li>
<li><p>Para baixar num único arquivo os pacotes .debs contendo os firmwares mais populares, basta fazer o download do arquivo compactado correspondente ao release da distribuição em <a href="http://cdimage.debian.org/cdimage/unofficial/non-free/firmware/" target="_blank" rel="external">http://cdimage.debian.org/cdimage/unofficial/non-free/firmware/</a>. Aí é só extrair seu conteúdo para uma pendrive e seguir os passos acima.</p>
</li>
<li><p>Opcionalmente, os pacotes contendo os firmwares podem ser instalados manualmente após a instalação. (No meu caso, os pacotes <code>firmware-realtek_0.43_all.deb</code> e <code>firmware-iwlwifi</code>)</p>
</li>
<li><p>Mais info: <a href="https://www.debian.org/releases/stable/amd64/ch06s04.html.en" target="_blank" rel="external">6.4. Loading Missing Firmware</a></p>
</li>
</ul>
<h3 id="Bugs,_etc-">Bugs, etc.</h3><p>Os bugs que encontrei durante a instalação seguem abaixo. Lembre-se que o Jessie está na reta final e esses bugs provavelmente estarão corrigidos à tempo do lançamento. Ainda assim, vale lembrar que não topei com bugs após a instalação.</p>
<ul>
<li>Não funcionou o touchpad durante a instalação (após a instalação, sim).</li>
<li>Após configurar os discos com a opção “Assistido - usar o disco todo e LVM criptografado”, não posso voltar para configurar mais nada relacionado à discos pois dessa forma o instalador fará configurações erradas que após a instalação inviabilizarão o boot sem intervenção manual. Parece semelhante ao problema relatado em <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=739299" target="_blank" rel="external">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=739299</a>.</li>
<li>Não consegui instalar os firmwares a partir de mídia removível durante a instalação, acabei instalando os pacotes .deb contendo os firmwares manualmente após a instalação.</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>O primeiro tema do blog é a instalação do Debian Jessie usando criptografia de disco. Escrevi o post porque consegui comprar meu primeiro notebook e ao contrário dos desktops que tive antes … tenho de me preocupar com os dados em caso de <del>perca</del> perda ou roubo.</p>
<p>A melhor maneira de se prevenir contra <del>perca</del> perda ou roubo é criptografando os dados e para tanto optei em instalar o Debian numa partição completamente criptografada. Assim … nem a PF consegue os dados :D.</p>
<p>O post <strong>não</strong> é indicado para quem nunca instalou um GNU/Linux na vida (não desista, há vários por aí :D), mas para quem nunca instalou um Debian.</p>
<p>A versão do Debian que optei é a Jessie (v8), ela está quase saindo do forno (é <strong>testing</strong> mas está em <em>freeze</em>, portanto só aceita correção de bugs). Existem pouquíssimos bugs nela (me deparei mais com eles na instalação do que no uso do dia-a-dia) e certamente o que está aqui valerá para a versão final que sairá em algumas semanas.</p>
<img src="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/jessie.png">]]>
    
    </summary>
    
      <category term="criptografia" scheme="https://felipehw.github.io/tags/criptografia/"/>
    
      <category term="debian" scheme="https://felipehw.github.io/tags/debian/"/>
    
      <category term="gnu/linux" scheme="https://felipehw.github.io/categories/gnu-linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World]]></title>
    <link href="https://felipehw.github.io/2015/02/28/hello-world/"/>
    <id>https://felipehw.github.io/2015/02/28/hello-world/</id>
    <published>2015-02-28T19:48:39.000Z</published>
    <updated>2015-03-08T01:20:32.000Z</updated>
    <content type="html"><![CDATA[<p>Quem é vivo sempre aparece, o <a href="https://lowdread.wordpress.com/" target="_blank" rel="external">primeiro blog que criei</a> (julho de 2010) entrou em hibernação profunda em julho de 2012. Na época eu estava me formando em História, entrando no curso de Gestão de T.I e especulava que ele poderia voltar no futuro mas sem promessas.</p>
<img src="/2015/02/28/hello-world/paradox-clock.jpg">
<p>Pois bem, voltamos com a segunda edição do blog justamente após o final do curso de Gestão de T.I. Quem sabe agora tenha mais tempo (só trabalho, ao invés de trabalho + estudo).</p>
<a id="more"></a>
<p>Recuperando a explicação da criação do 1ro blog:</p>
<blockquote><p>Bom, a ideia do blog é, antes de mais nada, conhecer um pouco essas ferramentas para criaçào de blog.</p>
<p>E <del>, talvez,</del> publicar algo que <del>ajudou meus colegas em suas primeiras explorações no mundo GNU/Linux</del> ajude a mim mesmo (hue) nas minhas explorações do mundo do software livre (principalmente GNU/Linux e desenvolvimento de software).</p>
<p>Podem entrar também coisas que considere interessante sobre software livre e todo tipo de informação relacionada a cultura livre, assim como, mais raramente, alguma coisa relacionada a política/história/sociedade/cerveja/futebol.</p>
<footer><strong>Eu mesmo</strong><cite><a href="https://lowdread.wordpress.com/2010/07/26/sobre-a-utilidade-disso/" target="_blank" rel="external">Sobre a utilidade disso</a></cite></footer></blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>Quem é vivo sempre aparece, o <a href="https://lowdread.wordpress.com/">primeiro blog que criei</a> (julho de 2010) entrou em hibernação profunda em julho de 2012. Na época eu estava me formando em História, entrando no curso de Gestão de T.I e especulava que ele poderia voltar no futuro mas sem promessas.</p>
<img src="/2015/02/28/hello-world/paradox-clock.jpg">
<p>Pois bem, voltamos com a segunda edição do blog justamente após o final do curso de Gestão de T.I. Quem sabe agora tenha mais tempo (só trabalho, ao invés de trabalho + estudo).</p>]]>
    
    </summary>
    
      <category term="offtopic" scheme="https://felipehw.github.io/categories/offtopic/"/>
    
  </entry>
  
</feed>