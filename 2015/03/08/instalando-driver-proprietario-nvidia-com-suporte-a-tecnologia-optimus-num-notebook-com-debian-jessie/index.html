<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie | $ls /home/felipehw</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Esse post é do dark side. É sobre como instalar o driver proprietário da Nvidia no Debian Jessie, dado que o estado do driver livre infelizmente é bem insatisfatório. A própria Nvidia sempre boicotou">
<meta property="og:type" content="article">
<meta property="og:title" content="Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie">
<meta property="og:url" content="https://felipehw.github.io/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/index.html">
<meta property="og:site_name" content="$ls /home/felipehw">
<meta property="og:description" content="Esse post é do dark side. É sobre como instalar o driver proprietário da Nvidia no Debian Jessie, dado que o estado do driver livre infelizmente é bem insatisfatório. A própria Nvidia sempre boicotou">
<meta property="og:image" content="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/darth-vader.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie">
<meta name="twitter:description" content="Esse post é do dark side. É sobre como instalar o driver proprietário da Nvidia no Debian Jessie, dado que o estado do driver livre infelizmente é bem insatisfatório. A própria Nvidia sempre boicotou">
  
    <link rel="alternative" href="/atom.xml" title="$ls /home/felipehw" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-60491247-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title">
      <img id="header-logo" src="/images/tux_v02.svg.png" alt="Tux pixelated" title="Tux pixelated">
      <div id="header-wrap-hs">
        <h1 id="logo-wrap">
          <a href="/" id="logo">$ls /home/felipehw</a>
        </h1>
        
          <h2 id="subtitle-wrap">
            <a href="/" id="subtitle">software &amp; cultura livre</a>
          </h2>
        
      </div>
    </div>
    <div id="header-inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:https://felipehw.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/" class="article-date">
  <time datetime="2015-03-08T04:08:20.000Z" itemprop="datePublished">8 mar 2015</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/gnu-linux/">gnu/linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Esse post é do <em>dark side</em>. É sobre como instalar o driver proprietário da Nvidia no Debian Jessie, dado que o estado do driver livre infelizmente é bem insatisfatório. A própria Nvidia sempre boicotou o desenvolvimento do driver livre (<a href="http://nouveau.freedesktop.org/wiki/" target="_blank" rel="external">nouveau</a>) e só recentemente começou a prestar alguma ajuda.</p>
<img src="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/darth-vader.png">
<a id="more"></a>
<p>A tecnologia <a href="http://www.nvidia.com/object/optimus_technology.html" target="_blank" rel="external">NVIDIA Optimus</a> permite aos notebooks utilizarem a placa de vídeo onboard no cotidiano e, apenas quando necessário, fazer uso da placa de vídeo dedicada (Nvidia). Isso é essencial para que a bateria tenha longa duração, dado que a placa de vídeo dedicada é ativada apenas quando necessário (e ela consome bastante energia :/).</p>
<p>O projeto que se dedica a suportar essa tecnologia no GNU/Linux é o <a href="http://bumblebee-project.org/" target="_blank" rel="external">Bumblebee</a>. Podemos usar ele com o driver livre (nouveau) e o driver proprietário. Como o driver proprietário da Nvidia é bem maduro no GNU/Linux, conseguimos por meio dele usar todo o potencial da placa de vídeo e por meio do Bumblebee economizar o máximo de energia possível.</p>
<p>A instalação no Debian antes do Jessie exigia alguma atenção, mas no Jessie os pacotes já estão nos repositórios e o processo é bem direto.</p>
<p>Vamos pôr a mão na massa:</p>
<h3 id="0-_Adicione_suporte_aos_repositórios_com_softwares_proprietários">0. Adicione suporte aos repositórios com softwares proprietários</h3><p>Antes de mais nada, os repositórios com softwares proprietários (<code>non-free</code>) e dependentes de proprietários (<code>contrib</code>) devem estar habilitados.</p>
<p>Para tanto, adicione no final das linhas de repositórios para o Jessie as palavras <code>non-free</code> e <code>contrib</code> em <code>/etc/apt/sources.list</code>. Exemplo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://debian.pop-sc.rnp.br/debian/ jessie main contrib non-free</span><br><span class="line">deb-src http://debian.pop-sc.rnp.br/debian/ jessie main contrib non-free</span><br></pre></td></tr></table></figure>
<p>Depois atualize os dados referentes aos repositórios executando:<br><code># apt-get update</code></p>
<h3 id="1-_Instalação">1. Instalação</h3><ul>
<li><p>Instale os pacotes necessários p/ o Bumblebee e o driver proprietário Nvidia:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install bumblebee-nvidia primus</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Apenas para Debian 64 bits</strong>. Permite que utilizemos o Bumblebee inclusive quando rodando aplicações 32 bits em sistemas 64 bits (essencial para diversos jogos no <a href="steampowered.com">Steam</a>):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dpkg --add-architecture i386 &amp;&amp; apt-get update &amp;&amp; apt-get install primus-libs:i386</span></span><br></pre></td></tr></table></figure>
<p>Atenção: Se durante a instalação, lhe for perguntado se deseja criar um arquivo <code>xorg.conf</code> responda que <strong>não</strong>. Essa pergunta se aplica apenas a sistemas que usam uma única placa (Nvidia - aka sem Optimus). Também não execute <code>nvidia-xconfig</code>.</p>
</li>
</ul>
<h3 id="2-_Pós-instalação">2. Pós-instalação</h3><p>Adicione os usuários que forem utilizar da placa Nvidia via Bumblebee ao grupo <code>bumblebee</code>:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># adduser $USER bumblebee</span></span><br></pre></td></tr></table></figure></p>
<p>Caso o usuário não seja adicionado, o mesmo não conseguirá chavear entre a placa de vídeo onboard e offboard.</p>
<p>Pronto! Tudo instalado e pós-instalado.</p>
<h3 id="3-_Utilização">3. Utilização</h3><p>O sistema estará por padrão utilizando sempre a placa onboard. Para utilizarmos a placa dedicada Nvidia, devemos executar a aplicação desejada por meio de um dos seguintes executáveis: <code>primusrun</code> ou <code>optirun</code>.</p>
<p>O <code>primusrun</code> é mais novo que <code>optirun</code>, tende a substituí-lo e possui maior performance (preferencial).</p>
<p>Exemplo de utilização:</p>
<ul>
<li><code>$ primusrun [options] &lt;application&gt; [application-parameters]</code></li>
<li><code>$ optirun [options] &lt;application&gt; [application-parameters]</code></li>
</ul>
<p>Executando o Steam c/ o <code>primusrun</code>: <code>$ primusrun steam</code>.</p>
<p>Como visto, assim temos um controle bem grande sobre quando uma ou outra placa deve ser usada. Aqui (com as observações abaixo feitas ao Steam) tenho rodado os jogos com toda a performance possível, e no restante do tempo a bateria dura e o notebook fica silencioso :D.</p>
<h4 id="3-1_Utilizando_Bumblebee_c/_Steam">3.1 Utilizando Bumblebee c/ Steam</h4><ul>
<li><p>Economizando energia no Steam:<br>Se executamos o Steam assim <code>$ primusrun steam</code>, gastaremos energia à toa pois estamos com a placa Nvidia ativada sempre (mesmo enquanto navegamos pelo Steam ou executamos jogos leves).<br>A forma ideal é configurar o jogo que necessitar da Nvidia defindo que o mesmo deve ser executado com o comando <code>primusrun %command%</code> (ou <code>optirun %command%</code>) em: <em>Properties</em> -&gt; <em>General</em> -&gt; <em>Set Launch Options…</em>.</p>
</li>
<li><p>Jogos que nao funcionarem no Debian Jessie c/ Optimus:<br>Pode ocorrer da versão errada do libGL estar sendo carregada. Para corrigir isso:</p>
<ol>
<li><p>Localize a versão correta do libGL:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ locate libGL.so</span><br></pre></td></tr></table></figure>
</li>
<li><p>Configure o Steam p/ carregar o jogo com a versao correta (em <em>Properties</em> -&gt; <em>General</em> -&gt; <em>Set Launch Options…</em>.). Exemplo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libGL.so.<span class="number">1</span> primusrun %<span class="built_in">command</span>%</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>Fonte: <a href="https://wiki.archlinux.org/index.php/steam" target="_blank" rel="external">Steam - ArchWiki</a></p>
<h2 id="Links">Links</h2><ul>
<li><a href="https://wiki.debian.org/Bumblebee#Usage" target="_blank" rel="external">Bumblebee - Debian Wiki</a>: Documentação da Wiki Debian sobre a instalação do Bumblebee. Simples e direta.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://felipehw.github.io/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/" data-id="ci8np5ola000u3rpv4vsi97xk" class="article-share-link">Share</a>
      
        <a href="https://felipehw.github.io/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dark-side/">dark side</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/debian/">debian</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nvidia/">nvidia</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/steam/">steam</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Proteja seus dados: backups fáceis e seguros no desktop GNU/Linux
        
      </div>
    </a>
  
  
    <a href="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Instalando Debian Jessie usando criptografia de disco</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/cultura-livre/">cultura livre</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gnu-linux/">gnu/linux</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/offtopic/">offtopic</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/backup/">backup</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compartilhamento/">compartilhamento</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/criptografia/">criptografia</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dark-side/">dark side</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/debian/">debian</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvidia/">nvidia</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pirataria/">pirataria</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/seguranca/">segurança</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/steam/">steam</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/torrent/">torrent</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/backup/" style="font-size: 10px;">backup</a><a href="/tags/compartilhamento/" style="font-size: 10px;">compartilhamento</a><a href="/tags/criptografia/" style="font-size: 15px;">criptografia</a><a href="/tags/dark-side/" style="font-size: 10px;">dark side</a><a href="/tags/debian/" style="font-size: 20px;">debian</a><a href="/tags/nvidia/" style="font-size: 10px;">nvidia</a><a href="/tags/pirataria/" style="font-size: 10px;">pirataria</a><a href="/tags/seguranca/" style="font-size: 10px;">segurança</a><a href="/tags/steam/" style="font-size: 10px;">steam</a><a href="/tags/torrent/" style="font-size: 10px;">torrent</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">abril 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">março 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">fevereiro 2015</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/04/19/criando-particoes-encriptadas-lvm-sobre-luks/">Criando partições encriptadas (LVM sobre LUKS)</a>
          </li>
        
          <li>
            <a href="/2015/03/24/torrent-profissa-gerenciamento-remoto-e-servidor-de-compartilhamento-24hs/">Torrent profissa: gerenciamento remoto e servidor de compartilhamento 24hs</a>
          </li>
        
          <li>
            <a href="/2015/03/14/proteja-seus-dados-backups-faceis-e-seguros-no-desktop-linux/">Proteja seus dados: backups fáceis e seguros no desktop GNU/Linux</a>
          </li>
        
          <li>
            <a href="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/">Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie</a>
          </li>
        
          <li>
            <a href="/2015/02/28/instalando-debian-jessie-usando-criptografia-de-disco/">Instalando Debian Jessie usando criptografia de disco</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 felipehw<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'felipehwgithubiogit';
  
  var disqus_url = 'https://felipehw.github.io/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>