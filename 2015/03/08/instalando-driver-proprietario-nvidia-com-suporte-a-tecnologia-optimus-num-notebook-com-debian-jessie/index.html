<!DOCTYPE HTML>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  
  <title>Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie | $ls /home/felipehw</title>
  <meta name="author" content="felipehw">
  
  <meta name="description" content="free software, free culture, copyleft, etc.">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie"/>
  <meta property="og:site_name" content="$ls /home/felipehw"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="shortcut icon" href="/favicon.png">
  
    <link rel="alternate" href="/atom.xml" title="$ls /home/felipehw" type="application/atom+xml">
  
  
<link rel="stylesheet" href="/css/style.css">

  <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script><![endif]-->
  

<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">$ls /home/felipehw</a></h1>
  <h2><a href="/">software &amp; cultura livre</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
      <li><a href="/about">About</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article id="post-instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie" class="h-entry post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time class="dt-published" datetime="2015-03-08T04:08:20.000Z"><a href="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/">8 Mar 2015</a></time>
      
      
  
    <h1 class="p-name title" itemprop="headline name">Instalando driver proprietário Nvidia com suporte à tecnologia Optimus num notebook com Debian Jessie</h1>
  

    </header>
    <div class="e-content entry" itemprop="articleBody">
      
        <p>Esse post é do <em>dark side</em>. É sobre como instalar o driver proprietário da Nvidia no Debian Jessie, dado que o estado do driver livre infelizmente é bem insatisfatório. A própria Nvidia sempre boicotou o desenvolvimento do driver livre (<a target="_blank" rel="noopener" href="http://nouveau.freedesktop.org/wiki/">nouveau</a>) e só recentemente começou a prestar alguma ajuda.</p>
<img src="/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/darth-vader.png" class="" title="O lado Nvidia da força">

<span id="more"></span>

<p>A tecnologia <a target="_blank" rel="noopener" href="http://www.nvidia.com/object/optimus_technology.html">NVIDIA Optimus</a> permite aos notebooks utilizarem a placa de vídeo onboard no cotidiano e, apenas quando necessário, fazer uso da placa de vídeo dedicada (Nvidia). Isso é essencial para que a bateria tenha longa duração, dado que a placa de vídeo dedicada é ativada apenas quando necessário (e ela consome bastante energia :/).</p>
<p>O projeto que se dedica a suportar essa tecnologia no GNU/Linux é o <a target="_blank" rel="noopener" href="http://bumblebee-project.org/">Bumblebee</a>. Podemos usar ele com o driver livre (nouveau) e o driver proprietário. Como o driver proprietário da Nvidia é bem maduro no GNU/Linux, conseguimos por meio dele usar todo o potencial da placa de vídeo e por meio do Bumblebee economizar o máximo de energia possível.</p>
<p>A instalação no Debian antes do Jessie exigia alguma atenção, mas no Jessie os pacotes já estão nos repositórios e o processo é bem direto.</p>
<p>Vamos pôr a mão na massa:</p>
<h3 id="0-Adicione-suporte-aos-repositorios-com-softwares-proprietarios"><a href="#0-Adicione-suporte-aos-repositorios-com-softwares-proprietarios" class="headerlink" title="0. Adicione suporte aos repositórios com softwares proprietários"></a>0. Adicione suporte aos repositórios com softwares proprietários</h3><p>Antes de mais nada, os repositórios com softwares proprietários (<code>non-free</code>) e dependentes de proprietários (<code>contrib</code>) devem estar habilitados.</p>
<p>Para tanto, adicione no final das linhas de repositórios para o Jessie as palavras <code>non-free</code> e <code>contrib</code> em <code>/etc/apt/sources.list</code>. Exemplo:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb http://debian.pop-sc.rnp.br/debian/ jessie main contrib non-free</span><br><span class="line">deb-src http://debian.pop-sc.rnp.br/debian/ jessie main contrib non-free</span><br></pre></td></tr></table></figure>

<p>Depois atualize os dados referentes aos repositórios executando:<br><code># apt-get update</code></p>
<h3 id="1-Instalacao"><a href="#1-Instalacao" class="headerlink" title="1. Instalação"></a>1. Instalação</h3><ul>
<li><p>Instale os pacotes necessários p/ o Bumblebee e o driver proprietário Nvidia:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># apt-get install bumblebee-nvidia primus</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Apenas para Debian 64 bits</strong>. Permite que utilizemos o Bumblebee inclusive quando rodando aplicações 32 bits em sistemas 64 bits (essencial para diversos jogos no <a href="steampowered.com">Steam</a>):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dpkg --add-architecture i386 &amp;&amp; apt-get update &amp;&amp; apt-get install primus-libs:i386</span></span><br></pre></td></tr></table></figure>
<p>Atenção: Se durante a instalação, lhe for perguntado se deseja criar um arquivo <code>xorg.conf</code> responda que <strong>não</strong>. Essa pergunta se aplica apenas a sistemas que usam uma única placa (Nvidia - aka sem Optimus). Também não execute <code>nvidia-xconfig</code>.</p>
</li>
</ul>
<h3 id="2-Pos-instalacao"><a href="#2-Pos-instalacao" class="headerlink" title="2. Pós-instalação"></a>2. Pós-instalação</h3><p>Adicione os usuários que forem utilizar da placa Nvidia via Bumblebee ao grupo <code>bumblebee</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># adduser $USER bumblebee</span></span><br></pre></td></tr></table></figure>

<p>Caso o usuário não seja adicionado, o mesmo não conseguirá chavear entre a placa de vídeo onboard e offboard.</p>
<p>Pronto! Tudo instalado e pós-instalado.</p>
<h3 id="3-Utilizacao"><a href="#3-Utilizacao" class="headerlink" title="3. Utilização"></a>3. Utilização</h3><p>O sistema estará por padrão utilizando sempre a placa onboard. Para utilizarmos a placa dedicada Nvidia, devemos executar a aplicação desejada por meio de um dos seguintes executáveis: <code>primusrun</code> ou <code>optirun</code>.</p>
<p>O <code>primusrun</code> é mais novo que <code>optirun</code>, tende a substituí-lo e possui maior performance (preferencial).</p>
<p>Exemplo de utilização:</p>
<ul>
<li><code>$ primusrun [options] &lt;application&gt; [application-parameters]</code></li>
<li><code>$ optirun [options] &lt;application&gt; [application-parameters]</code></li>
</ul>
<p>Executando o Steam c/ o <code>primusrun</code>: <code>$ primusrun steam</code>.</p>
<p>Como visto, assim temos um controle bem grande sobre quando uma ou outra placa deve ser usada. Aqui (com as observações abaixo feitas ao Steam) tenho rodado os jogos com toda a performance possível, e no restante do tempo a bateria dura e o notebook fica silencioso :D.</p>
<h4 id="3-1-Utilizando-Bumblebee-c-Steam"><a href="#3-1-Utilizando-Bumblebee-c-Steam" class="headerlink" title="3.1 Utilizando Bumblebee c/ Steam"></a>3.1 Utilizando Bumblebee c/ Steam</h4><ul>
<li><p>Economizando energia no Steam:<br>Se executamos o Steam assim <code>$ primusrun steam</code>, gastaremos energia à toa pois estamos com a placa Nvidia ativada sempre (mesmo enquanto navegamos pelo Steam ou executamos jogos leves).<br>A forma ideal é configurar o jogo que necessitar da Nvidia defindo que o mesmo deve ser executado com o comando <code>primusrun %command%</code> (ou <code>optirun %command%</code>) em: <em>Properties</em> -&gt; <em>General</em> -&gt; <em>Set Launch Options…</em>.</p>
</li>
<li><p>Jogos que nao funcionarem no Debian Jessie c/ Optimus:<br>Pode ocorrer da versão errada do libGL estar sendo carregada. Para corrigir isso:</p>
<ol>
<li>Localize a versão correta do libGL:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ locate libGL.so</span><br></pre></td></tr></table></figure></li>
<li>Configure o Steam p/ carregar o jogo com a versao correta (em <em>Properties</em> -&gt; <em>General</em> -&gt; <em>Set Launch Options…</em>.). Exemplo:<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LD_PRELOAD=/usr/lib/x86_64-linux-gnu/libGL.so.1 primusrun %<span class="built_in">command</span>%</span><br></pre></td></tr></table></figure>

</li>
</ol>
</li>
</ul>
<p>Fonte: <a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/steam">Steam - ArchWiki</a></p>
<h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><ul>
<li><a target="_blank" rel="noopener" href="https://wiki.debian.org/Bumblebee#Usage">Bumblebee - Debian Wiki</a>: Documentação da Wiki Debian sobre a instalação do Bumblebee. Simples e direta.</li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/gnu-linux/">gnu/linux</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/debian/">debian</a>, <a href="/tags/nvidia/">nvidia</a>, <a href="/tags/steam/">steam</a>, <a href="/tags/dark-side/">dark side</a>
  </div>

        
  <div class="addthis addthis_toolbox addthis_default_style">
    
      <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    
    
      <a class="addthis_button_tweet"></a>
    
    
      <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    
    
      <a class="addthis_button_pinterest_pinit" pi:pinit:layout="horizontal"></a>
    
    <a class="addthis_counter addthis_pill_style"></a>
  </div>
  <script src="//s7.addthis.com/js/300/addthis_widget.js"></script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">Comments</h1>

  
      <div id="fb-root"></div>
<script>
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789012345";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script>

<div class="fb-comments" data-href="https://felipehw.github.io/2015/03/08/instalando-driver-proprietario-nvidia-com-suporte-a-tecnologia-optimus-num-notebook-com-debian-jessie/index.html" data-num-posts="5" data-width="840" data-colorscheme="light"></div>
      
  
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="as_sitesearch" value="felipehw.github.io">
  </form>
</div>


  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/cultura-livre/">cultura livre</a><small>4</small></li>
  
    <li><a href="/categories/develop/">develop</a><small>4</small></li>
  
    <li><a href="/categories/gnu-linux/">gnu/linux</a><small>14</small></li>
  
    <li><a href="/categories/humanas/">humanas</a><small>2</small></li>
  
    <li><a href="/categories/offtopic/">offtopic</a><small>7</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/asteroide/">asteroide</a><small>1</small></li>
  
    <li><a href="/tags/astronomia/">astronomia</a><small>6</small></li>
  
    <li><a href="/tags/atom/">atom</a><small>2</small></li>
  
    <li><a href="/tags/backup/">backup</a><small>1</small></li>
  
    <li><a href="/tags/compartilhamento/">compartilhamento</a><small>4</small></li>
  
    <li><a href="/tags/criptografia/">criptografia</a><small>2</small></li>
  
    <li><a href="/tags/dark-side/">dark side</a><small>1</small></li>
  
    <li><a href="/tags/debian/">debian</a><small>6</small></li>
  
    <li><a href="/tags/desktop/">desktop</a><small>1</small></li>
  
    <li><a href="/tags/ecmascript/">ecmascript</a><small>4</small></li>
  
    <li><a href="/tags/fedora/">fedora</a><small>2</small></li>
  
    <li><a href="/tags/firefox/">firefox</a><small>1</small></li>
  
    <li><a href="/tags/flow/">flow</a><small>1</small></li>
  
    <li><a href="/tags/fotografia/">fotografia</a><small>6</small></li>
  
    <li><a href="/tags/fullhd/">fullhd</a><small>1</small></li>
  
    <li><a href="/tags/glamour/">glamour</a><small>1</small></li>
  
    <li><a href="/tags/gnome/">gnome</a><small>3</small></li>
  
    <li><a href="/tags/historia/">história</a><small>1</small></li>
  
    <li><a href="/tags/humanas/">humanas</a><small>2</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>4</small></li>
  
    <li><a href="/tags/jsx/">jsx</a><small>2</small></li>
  
    <li><a href="/tags/livros/">livros</a><small>2</small></li>
  
    <li><a href="/tags/lua/">lua</a><small>1</small></li>
  
    <li><a href="/tags/luks/">luks</a><small>1</small></li>
  
    <li><a href="/tags/lvm/">lvm</a><small>2</small></li>
  
    <li><a href="/tags/music/">music</a><small>1</small></li>
  
    <li><a href="/tags/nvidia/">nvidia</a><small>1</small></li>
  
    <li><a href="/tags/particionamento/">particionamento</a><small>2</small></li>
  
    <li><a href="/tags/planeta/">planeta</a><small>3</small></li>
  
    <li><a href="/tags/proxy/">proxy</a><small>1</small></li>
  
    <li><a href="/tags/raspberry/">raspberry</a><small>2</small></li>
  
    <li><a href="/tags/seguranca/">segurança</a><small>1</small></li>
  
    <li><a href="/tags/ssd/">ssd</a><small>1</small></li>
  
    <li><a href="/tags/steam/">steam</a><small>1</small></li>
  
    <li><a href="/tags/thunderbird/">thunderbird</a><small>1</small></li>
  
    <li><a href="/tags/torrent/">torrent</a><small>1</small></li>
  
    <li><a href="/tags/trim/">trim</a><small>1</small></li>
  
    <li><a href="/tags/universidade/">universidade</a><small>2</small></li>
  
    <li><a href="/tags/web/">web</a><small>4</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2022 felipehw
  
</div>
<div class="clearfix"></div></footer>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/jquery.imagesloaded.min.js"></script>


<script src="/js/gallery.js"></script>



<script>
var disqus_shortname = 'felipehwgithubiogit';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script>
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>
